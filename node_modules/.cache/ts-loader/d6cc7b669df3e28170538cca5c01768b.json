{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js!/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js??ref--14-2!/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/vueScale/vueScale.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/components/vueScale/vueScale.vue","mtime":1574740402300},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js","mtime":1574242632071},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js","mtime":1574332289889},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js","mtime":1574242648574}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _slicedToArray from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Prop, Emit, Vue } from 'vue-property-decorator';\n\nvar vueScale =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(vueScale, _Vue);\n\n  function vueScale() {\n    var _this;\n\n    _classCallCheck(this, vueScale);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(vueScale).apply(this, arguments));\n    _this.e = null;\n    _this.tMatrix = [1, 0, 0, 1, 0, 0]; // x缩放，无，无，y缩放，x平移，y平移\n\n    _this.initScale = 1; // 初始化scale\n\n    _this.poscenter = _this.point2D(0, 0); // 缓存双指的中心坐标\n\n    _this.duration = false; // 设置过渡效果，用于双击缩放效果\n\n    _this.lastTranslate = _this.point2D(0, 0); // 记录上次的偏移值\n\n    _this.lastcenter = _this.point2D(_this.width / 2, _this.height / 2); // 图像的中心点，用于对比双指中心点\n\n    _this.center = _this.point2D(_this.width / 2, _this.height / 2);\n    _this.nowScale = 1; // 缩放scale\n\n    _this.top = 0; // 距离顶部\n\n    _this.left = 0; // 距离左边\n\n    return _this;\n  }\n\n  _createClass(vueScale, [{\n    key: \"mounted\",\n    value: function mounted() {\n      this.top = this.$refs.vueScaleRef.getBoundingClientRect().top;\n      this.left = this.$refs.vueScaleRef.getBoundingClientRect().left;\n      console.log('距离左边，顶部', this.left, this.top);\n    }\n  }, {\n    key: \"onPan\",\n    value: function onPan(ev) {\n      this.duration = false;\n\n      var cloneTMatrix = _toConsumableArray(this.tMatrix);\n\n      cloneTMatrix[4] = this.lastTranslate.x + ev.deltaX;\n      cloneTMatrix[5] = this.lastTranslate.y + ev.deltaY;\n      this.tMatrix = cloneTMatrix; // this.$emit('moveChange', { x: ev.center.x, y: ev.center.y - 150 });\n\n      this.moveChange({\n        x: ev.center.x - this.left,\n        y: ev.center.y - this.top\n      });\n    }\n  }, {\n    key: \"onPanStart\",\n    value: function onPanStart() {\n      this.lastTranslate = this.point2D(this.tMatrix[4], this.tMatrix[5]); // 缓存上一次的偏移值\n    }\n  }, {\n    key: \"onPinch\",\n    value: function onPinch(ev) {\n      console.log(ev);\n      this.duration = false;\n\n      var cloneTMatrix = _toConsumableArray(this.tMatrix);\n\n      cloneTMatrix[4] = this.lastTranslate.x + ev.deltaX;\n      cloneTMatrix[5] = this.lastTranslate.y + ev.deltaY;\n      this.tMatrix = cloneTMatrix;\n      this.moveChange({\n        x: ev.center.x - this.left,\n        y: ev.center.y - this.top\n      });\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"moveChange\",\n    value: function moveChange(point2DObj) {\n      return point2DObj;\n    } // 缩放开始\n\n  }, {\n    key: \"onPinchStart\",\n    value: function onPinchStart(ev) {\n      this.duration = false;\n      this.lastTranslate = this.point2D(this.tMatrix[4], this.tMatrix[5]); //记录上一次的偏移值\n\n      this.initScale = this.tMatrix[0] || 1;\n      this.poscenter = this.point2D(ev.center.x - this.left, ev.center.y - this.top); //重新计算放大后的中心坐标\n      // eslint-disable-next-line\n\n      this.lastcenter = this.point2D(this.center.x + this.lastTranslate.x, this.center.y + this.lastTranslate.y); // eslint-disable-next-line\n\n      this.poscenter = this.point2D(ev.center.x - this.lastcenter.x - this.left, ev.center.y - this.top - this.lastcenter.y);\n    }\n  }, {\n    key: \"onDoubleTap\",\n    value: function onDoubleTap(ev) {\n      console.log(ev);\n      this.duration = true;\n\n      var _this$tMatrix = _slicedToArray(this.tMatrix, 1);\n\n      this.nowScale = _this$tMatrix[0];\n\n      var cloneTMatrix = _toConsumableArray(this.tMatrix);\n\n      if (this.nowScale !== 1 || this.tMatrix[4] !== 0) {\n        //scale不等于1，要重回1\n        cloneTMatrix[0] = 1;\n        cloneTMatrix[3] = 1;\n        cloneTMatrix[4] = 0;\n        cloneTMatrix[5] = 0; // this.$emit('scaleChange', 1, this.poscenter);\n\n        this.scaleChange(1, this.poscenter);\n      } else {\n        var pointer = ev.center;\n        var scale = this.maxScale;\n        cloneTMatrix[0] = scale;\n        cloneTMatrix[3] = scale;\n        cloneTMatrix[4] = (1 - scale) * (pointer.x - this.center.x - this.left);\n        cloneTMatrix[5] = (1 - scale) * (pointer.y - this.top - this.center.y); // this.$emit('scaleChange', scale, { x: pointer.x, y: pointer.y - this.top });\n\n        this.scaleChange(scale, {\n          x: pointer.x - this.left,\n          y: pointer.y - this.top\n        });\n      }\n\n      this.tMatrix = cloneTMatrix;\n    } // 回到初始状态\n\n  }, {\n    key: \"backState\",\n    value: function backState() {\n      var cloneTMatrix = _toConsumableArray(this.tMatrix);\n\n      this.duration = true;\n      cloneTMatrix[0] = 1;\n      cloneTMatrix[3] = 1;\n      cloneTMatrix[4] = 0;\n      cloneTMatrix[5] = 0;\n      this.tMatrix = cloneTMatrix;\n      this.scaleChange(1);\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"scaleChange\",\n    value: function scaleChange(scale) {\n      var point = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return {\n        scale: scale,\n        point: point\n      };\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"point2D\",\n    value: function point2D(x, y) {\n      console.log(this);\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }]);\n\n  return vueScale;\n}(Vue);\n\ntslib_1.__decorate([Prop({\n  type: Number,\n  default: 100\n})], vueScale.prototype, \"height\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Number,\n  default: 100\n})], vueScale.prototype, \"width\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Number,\n  default: 1.5\n})], vueScale.prototype, \"maxScale\", void 0);\n\ntslib_1.__decorate([Emit('moveChange')], vueScale.prototype, \"moveChange\", null);\n\ntslib_1.__decorate([Emit('scaleChange')], vueScale.prototype, \"scaleChange\", null);\n\nvueScale = tslib_1.__decorate([Component], vueScale);\nexport default vueScale;",{"version":3,"sources":["/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/vueScale/vueScale.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {\r\n  Component,\r\n  Prop,\r\n  Emit,\r\n  Vue,\r\n} from 'vue-property-decorator';\r\n\r\ninterface point2D {\r\n  x: number,\r\n  y: number,\r\n}\r\n\r\n@Component\r\nexport default class vueScale extends Vue {\r\n  @Prop({ type: Number, default: 100 }) private height!: number;\r\n\r\n  @Prop({ type: Number, default: 100 }) private width!: number;\r\n\r\n  // @Prop({ type: Number, default: 0 }) private top!: number;\r\n\r\n  @Prop({ type: Number, default: 1.5 }) private maxScale!: number;\r\n\r\n  e: any = null;\r\n\r\n  tMatrix: Array<number> = [1, 0, 0, 1, 0, 0]; // x缩放，无，无，y缩放，x平移，y平移\r\n\r\n  initScale: number = 1; // 初始化scale\r\n\r\n  poscenter: point2D = this.point2D(0, 0); // 缓存双指的中心坐标\r\n\r\n  duration: boolean = false; // 设置过渡效果，用于双击缩放效果\r\n\r\n  lastTranslate: point2D = this.point2D(0, 0); // 记录上次的偏移值\r\n\r\n  lastcenter: point2D = this.point2D(this.width / 2, this.height / 2); // 图像的中心点，用于对比双指中心点\r\n\r\n  center: point2D = this.point2D(this.width / 2, this.height / 2);\r\n\r\n  nowScale: number = 1; // 缩放scale\r\n\r\n  top: number = 0; // 距离顶部\r\n\r\n  left: number = 0; // 距离左边\r\n\r\n  mounted() {\r\n    this.top = this.$refs.vueScaleRef.getBoundingClientRect().top;\r\n    this.left = this.$refs.vueScaleRef.getBoundingClientRect().left;\r\n    console.log('距离左边，顶部', this.left, this.top);\r\n  }\r\n\r\n  onPan(ev: any) {\r\n    this.duration = false;\r\n    const cloneTMatrix = [...this.tMatrix];\r\n    cloneTMatrix[4] = this.lastTranslate.x + ev.deltaX;\r\n    cloneTMatrix[5] = this.lastTranslate.y + ev.deltaY;\r\n    this.tMatrix = cloneTMatrix;\r\n    // this.$emit('moveChange', { x: ev.center.x, y: ev.center.y - 150 });\r\n    this.moveChange({ x: ev.center.x - this.left, y: ev.center.y - this.top });\r\n  }\r\n\r\n  onPanStart() {\r\n    this.lastTranslate = this.point2D(this.tMatrix[4], this.tMatrix[5]); // 缓存上一次的偏移值\r\n  }\r\n\r\n  onPinch(ev) {\r\n    console.log(ev);\r\n    this.duration = false;\r\n    const cloneTMatrix = [...this.tMatrix];\r\n    cloneTMatrix[4] = this.lastTranslate.x + ev.deltaX;\r\n    cloneTMatrix[5] = this.lastTranslate.y + ev.deltaY;\r\n    this.tMatrix = cloneTMatrix;\r\n    this.moveChange({ x: ev.center.x - this.left, y: ev.center.y - this.top });\r\n  }\r\n\r\n  @Emit('moveChange')\r\n  // eslint-disable-next-line\r\n  moveChange(point2DObj) {\r\n    return point2DObj;\r\n  }\r\n\r\n  // 缩放开始\r\n  onPinchStart(ev) {\r\n    this.duration = false;\r\n    this.lastTranslate = this.point2D(this.tMatrix[4], this.tMatrix[5]);//记录上一次的偏移值\r\n    this.initScale = this.tMatrix[0] || 1;\r\n    this.poscenter = this.point2D(ev.center.x - this.left, ev.center.y - this.top);\r\n\r\n    //重新计算放大后的中心坐标\r\n    // eslint-disable-next-line\r\n    this.lastcenter = this.point2D(this.center.x + this.lastTranslate.x, this.center.y + this.lastTranslate.y);\r\n    // eslint-disable-next-line\r\n    this.poscenter = this.point2D(ev.center.x - this.lastcenter.x - this.left, ev.center.y - this.top - this.lastcenter.y);\r\n  }\r\n\r\n  onDoubleTap(ev) {\r\n    console.log(ev);\r\n    this.duration = true;\r\n    [this.nowScale] = this.tMatrix;\r\n    const cloneTMatrix = [...this.tMatrix];\r\n    if (this.nowScale !== 1 || this.tMatrix[4] !== 0) {\r\n      //scale不等于1，要重回1\r\n      cloneTMatrix[0] = 1;\r\n      cloneTMatrix[3] = 1;\r\n      cloneTMatrix[4] = 0;\r\n      cloneTMatrix[5] = 0;\r\n      // this.$emit('scaleChange', 1, this.poscenter);\r\n      this.scaleChange(1, this.poscenter);\r\n    } else {\r\n      const pointer = ev.center;\r\n      const scale = this.maxScale;\r\n      cloneTMatrix[0] = scale;\r\n      cloneTMatrix[3] = scale;\r\n      cloneTMatrix[4] = (1 - scale) * (pointer.x - this.center.x - this.left);\r\n      cloneTMatrix[5] = (1 - scale) * (pointer.y - this.top - this.center.y);\r\n      // this.$emit('scaleChange', scale, { x: pointer.x, y: pointer.y - this.top });\r\n      this.scaleChange(scale, { x: pointer.x - this.left, y: pointer.y - this.top });\r\n    }\r\n    this.tMatrix = cloneTMatrix;\r\n  }\r\n\r\n  // 回到初始状态\r\n  backState() {\r\n    const cloneTMatrix = [...this.tMatrix];\r\n    this.duration = true;\r\n    cloneTMatrix[0] = 1;\r\n    cloneTMatrix[3] = 1;\r\n    cloneTMatrix[4] = 0;\r\n    cloneTMatrix[5] = 0;\r\n    this.tMatrix = cloneTMatrix;\r\n    this.scaleChange(1);\r\n  }\r\n\r\n  @Emit('scaleChange')\r\n  // eslint-disable-next-line\r\n  scaleChange(scale: number, point = {}): object {\r\n    return { scale, point };\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  point2D(x: number, y: number): point2D {\r\n    console.log(this);\r\n    return { x, y };\r\n  }\r\n}\r\n"],"sourceRoot":""}]}