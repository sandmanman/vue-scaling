{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js!/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js??ref--14-2!/Users/zhangyufan/em/testPro/vue-scale/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyufan/em/testPro/vue-scale/src/components/affix/helper.ts","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/components/affix/helper.ts","mtime":1573474128000},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js","mtime":1574242632071},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js","mtime":1574332289889},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1574242646426}],"contextDependencies":[],"result":["import _Object$keys from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\nimport addDOMEventListener from 'add-dom-event-listener';\nexport var OBSERVED_EVENT = ['scroll', 'resize'];\nvar observers = [];\nexport var addObserved = function addObserved(target, updatePostion) {\n  if (!target) {\n    return;\n  }\n\n  var entity = observers.find(function (item) {\n    return item.target === target;\n  }); // 如果一个页面存在多个 target 一样的，就存起来一起触发\n\n  if (entity) {\n    entity.eventList.push(updatePostion);\n  }\n\n  if (!entity) {\n    entity = {\n      target: target,\n      eventList: [updatePostion],\n      eventHandler: {}\n    };\n    observers.push(entity);\n    OBSERVED_EVENT.forEach(function (eventName) {\n      entity.eventHandler[eventName] = addDOMEventListener(target, eventName, function (event) {\n        entity.eventList.forEach(function (eventItem) {\n          eventItem(event);\n        });\n      });\n    });\n  }\n}; // end addObserved\n\nexport var removeObserved = function removeObserved(target) {\n  var entity = observers.find(function (item) {\n    return item.target === target;\n  });\n  var entityIndex = observers.findIndex(function (item) {\n    return item.target === target;\n  });\n\n  if (entity) {\n    _Object$keys(entity.eventHandler).forEach(function (eventName) {\n      var handler = entity.eventHandler[eventName];\n\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n\n    observers.splice(entityIndex, 1);\n  }\n};",{"version":3,"sources":["/Users/zhangyufan/em/testPro/vue-scale/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyufan/em/testPro/vue-scale/src/components/affix/helper.ts"],"names":[],"mappings":";;;;AAAA,OAAO,mBAAP,MAAgC,wBAAhC;AAUA,OAAO,IAAM,cAAc,GAAG,CAAC,QAAD,EAAW,QAAX,CAAvB;AAEP,IAAM,SAAS,GAAqB,EAApC;AAEA,OAAO,IAAM,WAAW,GAAG,SAAd,WAAc,CAAC,MAAD,EAAsC,aAAtC,EAAuE;AAChG,MAAI,CAAC,MAAL,EAAa;AACX;AACD;;AAED,MAAI,MAAM,GAA+B,SAAS,CAAC,IAAV,CAAe,UAAA,IAAI;AAAA,WAAI,IAAI,CAAC,MAAL,KAAgB,MAApB;AAAA,GAAnB,CAAzC,CALgG,CAMhG;;AACA,MAAI,MAAJ,EAAY;AACV,IAAA,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAsB,aAAtB;AACD;;AACD,MAAI,CAAC,MAAL,EAAa;AACX,IAAA,MAAM,GAAG;AACP,MAAA,MAAM,EAAN,MADO;AAEP,MAAA,SAAS,EAAE,CAAC,aAAD,CAFJ;AAGP,MAAA,YAAY,EAAE;AAHP,KAAT;AAKA,IAAA,SAAS,CAAC,IAAV,CAAe,MAAf;AAEA,IAAA,cAAc,CAAC,OAAf,CAAuB,UAAC,SAAD,EAAc;AACnC,MAAA,MAAO,CAAC,YAAR,CAAqB,SAArB,IAAkC,mBAAmB,CAAC,MAAD,EAAS,SAAT,EAAoB,UAAC,KAAD,EAAiB;AACxF,QAAA,MAAO,CAAC,SAAR,CAAkB,OAAlB,CAA0B,UAAC,SAAD,EAAc;AACtC,UAAA,SAAS,CAAC,KAAD,CAAT;AACD,SAFD;AAGD,OAJoD,CAArD;AAKD,KAND;AAOD;AACF,CA1BM,C,CA0BJ;;AAEH,OAAO,IAAM,cAAc,GAAG,SAAjB,cAAiB,CAAC,MAAD,EAA8C;AAC1E,MAAM,MAAM,GAA+B,SAAS,CAAC,IAAV,CAAe,UAAA,IAAI;AAAA,WAAI,IAAI,CAAC,MAAL,KAAgB,MAApB;AAAA,GAAnB,CAA3C;AACA,MAAM,WAAW,GAAuB,SAAS,CAAC,SAAV,CAAoB,UAAA,IAAI;AAAA,WAAI,IAAI,CAAC,MAAL,KAAgB,MAApB;AAAA,GAAxB,CAAxC;;AACA,MAAI,MAAJ,EAAY;AACV,iBAAY,MAAM,CAAC,YAAnB,EAAiC,OAAjC,CAAyC,UAAC,SAAD,EAAc;AACrD,UAAM,OAAO,GAAG,MAAO,CAAC,YAAR,CAAqB,SAArB,CAAhB;;AACA,UAAI,OAAO,IAAI,OAAO,CAAC,MAAvB,EAA+B;AAC7B,QAAA,OAAO,CAAC,MAAR;AACD;AACF,KALD;;AAMA,IAAA,SAAS,CAAC,MAAV,CAAiB,WAAjB,EAA8B,CAA9B;AACD;AACF,CAZM","sourcesContent":["import addDOMEventListener from 'add-dom-event-listener';\r\n\r\ninterface ObserverEntity {\r\n  target: HTMLElement | Window | null;\r\n  eventList: Function[];\r\n  eventHandler: {\r\n    [eventName: string]: any,\r\n  };\r\n}\r\n\r\nexport const OBSERVED_EVENT = ['scroll', 'resize'];\r\n\r\nconst observers: ObserverEntity[] = [];\r\n\r\nexport const addObserved = (target: HTMLElement | Window | null, updatePostion: Function): void => {\r\n  if (!target) {\r\n    return;\r\n  }\r\n\r\n  let entity: ObserverEntity | undefined = observers.find(item => item.target === target);\r\n  // 如果一个页面存在多个 target 一样的，就存起来一起触发\r\n  if (entity) {\r\n    entity.eventList.push(updatePostion);\r\n  }\r\n  if (!entity) {\r\n    entity = {\r\n      target,\r\n      eventList: [updatePostion],\r\n      eventHandler: {},\r\n    };\r\n    observers.push(entity);\r\n\r\n    OBSERVED_EVENT.forEach((eventName) => {\r\n      entity!.eventHandler[eventName] = addDOMEventListener(target, eventName, (event: Event) => {\r\n        entity!.eventList.forEach((eventItem) => {\r\n          eventItem(event);\r\n        });\r\n      });\r\n    });\r\n  }\r\n}; // end addObserved\r\n\r\nexport const removeObserved = (target: HTMLElement | Window | null): void => {\r\n  const entity: ObserverEntity | undefined = observers.find(item => item.target === target);\r\n  const entityIndex: number | undefined = observers.findIndex(item => item.target === target);\r\n  if (entity) {\r\n    Object.keys(entity.eventHandler).forEach((eventName) => {\r\n      const handler = entity!.eventHandler[eventName];\r\n      if (handler && handler.remove) {\r\n        handler.remove();\r\n      }\r\n    });\r\n    observers.splice(entityIndex, 1);\r\n  }\r\n};\r\n"],"sourceRoot":""}]}