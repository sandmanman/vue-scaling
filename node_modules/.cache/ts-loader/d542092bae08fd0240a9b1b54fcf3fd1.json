{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js!/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js??ref--14-2!/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/views/components/OnlineReview.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/views/components/OnlineReview.vue","mtime":1573474128000},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js","mtime":1574242632071},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js","mtime":1574332289889},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js","mtime":1574242648574}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Prop, Emit, Vue } from 'vue-property-decorator';\nimport WCode from '@/views/components/OnlineCode.vue';\nimport WLink from '@/components/link/Link.vue';\nimport WAffix from '@/components/affix/Affix.vue';\nimport WRender from '@/helper/render';\nimport temString from './tem';\n\nvar Demo =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Demo, _Vue);\n\n  function Demo() {\n    var _this;\n\n    _classCallCheck(this, Demo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Demo).apply(this, arguments));\n    _this.expendStatus = false;\n    _this.temCodemirror = null;\n    _this.jsCodemirror = null;\n    _this.iframe = null;\n    _this.codeStatus = 'html';\n    _this.isUsed = false;\n    return _this;\n  }\n\n  _createClass(Demo, [{\n    key: \"mounted\",\n    value: function mounted() {\n      this.iframe = this.$refs.iframe;\n      this.updateIframe();\n    }\n  }, {\n    key: \"changeHandle\",\n    value: function changeHandle(params) {\n      return params;\n    }\n  }, {\n    key: \"temMounted\",\n    value: function temMounted(cm) {\n      this.temCodemirror = cm;\n    }\n  }, {\n    key: \"jsMounted\",\n    value: function jsMounted(cm) {\n      this.jsCodemirror = cm;\n    }\n  }, {\n    key: \"updateIframe\",\n    value: function updateIframe() {\n      var tem = this.temCodemirror.getValue();\n      var js = this.jsCode ? this.jsCodemirror.getValue() : '';\n      this.renderIframe();\n\n      if (this.iframe) {\n        var preview = this.iframe.contentDocument || this.iframe.contentWindow.document;\n        preview.open();\n        preview.write(temString(tem, js));\n        preview.close();\n      }\n    }\n  }, {\n    key: \"renderIframe\",\n    value: function renderIframe() {\n      var boxEle = this.$refs.box;\n      var oldIframe = boxEle.firstChild;\n\n      if (oldIframe.nodeName === 'IFRAME') {\n        boxEle.removeChild(oldIframe);\n      }\n\n      var iframeEle = document.createElement('iframe');\n      boxEle.insertBefore(iframeEle, boxEle.firstChild);\n      iframeEle.style.height = this.iframeHeight || '';\n      this.iframe = iframeEle;\n    }\n  }, {\n    key: \"changeCodeStatus\",\n    value: function changeCodeStatus(type) {\n      this.codeStatus = type;\n      this.testAffixUsed();\n    }\n  }, {\n    key: \"handleExpendStatus\",\n    value: function handleExpendStatus() {\n      this.expendStatus = !this.expendStatus;\n      this.testAffixUsed();\n    }\n  }, {\n    key: \"testAffixUsed\",\n    value: function testAffixUsed() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        var boxRect = _this2.$refs.box.getBoundingClientRect();\n\n        _this2.isUsed = boxRect.y + boxRect.height - window.innerHeight < 0;\n      });\n    }\n  }, {\n    key: \"affixChange\",\n    value: function affixChange() {\n      var boxRect = this.$refs.box.getBoundingClientRect();\n      this.isUsed = boxRect.y < 40 - boxRect.height;\n    }\n  }]);\n\n  return Demo;\n}(Vue);\n\ntslib_1.__decorate([Prop(Function)], Demo.prototype, \"render\", void 0);\n\ntslib_1.__decorate([Prop(Function)], Demo.prototype, \"before\", void 0);\n\ntslib_1.__decorate([Prop(String)], Demo.prototype, \"temCode\", void 0);\n\ntslib_1.__decorate([Prop(String)], Demo.prototype, \"jsCode\", void 0);\n\ntslib_1.__decorate([Prop(String)], Demo.prototype, \"title\", void 0);\n\ntslib_1.__decorate([Prop(String)], Demo.prototype, \"desc\", void 0);\n\ntslib_1.__decorate([Prop(String)], Demo.prototype, \"iframeHeight\", void 0);\n\ntslib_1.__decorate([Prop(Object)], Demo.prototype, \"data\", void 0);\n\ntslib_1.__decorate([Emit('changeHandle')], Demo.prototype, \"changeHandle\", null);\n\nDemo = tslib_1.__decorate([Component({\n  components: {\n    WCode: WCode,\n    WLink: WLink,\n    WRender: WRender,\n    WAffix: WAffix\n  }\n})], Demo);\nexport default Demo;",{"version":3,"sources":["/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/views/components/OnlineReview.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {\r\n  Component,\r\n  Prop,\r\n  Emit,\r\n  Vue,\r\n} from 'vue-property-decorator';\r\nimport WCode from '@/views/components/OnlineCode.vue';\r\nimport WLink from '@/components/link/Link.vue';\r\nimport WAffix from '@/components/affix/Affix.vue';\r\nimport WRender from '@/helper/render';\r\nimport temString from './tem';\r\n\r\n@Component({\r\n  components: {\r\n    WCode,\r\n    WLink,\r\n    WRender,\r\n    WAffix,\r\n  },\r\n})\r\nexport default class Demo extends Vue {\r\n  expendStatus: boolean = false;\r\n\r\n  temCodemirror: any = null;\r\n\r\n  jsCodemirror: any = null;\r\n\r\n  iframe: any = null;\r\n\r\n  codeStatus: string = 'html';\r\n\r\n  isUsed: boolean = false;\r\n\r\n  @Prop(Function) private render!: Function;\r\n\r\n  @Prop(Function) private before!: Function;\r\n\r\n  @Prop(String) private temCode!: string;\r\n\r\n  @Prop(String) private jsCode!: string;\r\n\r\n  @Prop(String) private title!: string;\r\n\r\n  @Prop(String) private desc!: string;\r\n\r\n  @Prop(String) private iframeHeight!: string;\r\n\r\n  @Prop(Object) private data!: object;\r\n\r\n  mounted() {\r\n    this.iframe = this.$refs.iframe;\r\n    this.updateIframe();\r\n  }\r\n\r\n  @Emit('changeHandle')\r\n  changeHandle(params: any) {\r\n    return params;\r\n  }\r\n\r\n  temMounted(cm: any) {\r\n    this.temCodemirror = cm;\r\n  }\r\n\r\n  jsMounted(cm: any) {\r\n    this.jsCodemirror = cm;\r\n  }\r\n\r\n  updateIframe() {\r\n    const tem = this.temCodemirror.getValue();\r\n    const js = this.jsCode ? this.jsCodemirror.getValue() : '';\r\n\r\n    this.renderIframe();\r\n\r\n    if (this.iframe) {\r\n      const preview = this.iframe.contentDocument || this.iframe.contentWindow.document;\r\n      preview.open();\r\n      preview.write(temString(tem, js));\r\n      preview.close();\r\n    }\r\n  }\r\n\r\n  renderIframe() {\r\n    const boxEle = this.$refs.box as any;\r\n    const oldIframe = boxEle.firstChild;\r\n\r\n    if (oldIframe.nodeName === 'IFRAME') {\r\n      boxEle.removeChild(oldIframe);\r\n    }\r\n\r\n    const iframeEle = document.createElement('iframe');\r\n    boxEle.insertBefore(iframeEle, boxEle.firstChild);\r\n\r\n    iframeEle.style.height = this.iframeHeight || '';\r\n\r\n    this.iframe = iframeEle;\r\n  }\r\n\r\n  changeCodeStatus(type: string) {\r\n    this.codeStatus = type;\r\n    this.testAffixUsed();\r\n  }\r\n\r\n  handleExpendStatus() {\r\n    this.expendStatus = !this.expendStatus;\r\n    this.testAffixUsed();\r\n  }\r\n\r\n  testAffixUsed() {\r\n    this.$nextTick(() => {\r\n      const boxRect = (this.$refs.box as any).getBoundingClientRect();\r\n      this.isUsed = boxRect.y + boxRect.height - window.innerHeight < 0;\r\n    });\r\n  }\r\n\r\n  affixChange() {\r\n    const boxRect = (this.$refs.box as any).getBoundingClientRect();\r\n    this.isUsed = boxRect.y < 40 - boxRect.height;\r\n  }\r\n}\r\n"],"sourceRoot":""}]}