{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js!/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js??ref--14-2!/Users/zhangyufan/em/testPro/vue-scale/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyufan/em/testPro/vue-scale/src/helper/date.ts","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/helper/date.ts","mtime":1573474128000},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js","mtime":1574242632071},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js","mtime":1574332289889},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1574242646426}],"contextDependencies":[],"result":["import _slicedToArray from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _Object$assign from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/core-js/object/assign\";\nimport moment from 'moment';\nimport concat from 'lodash/concat';\nimport { hasOwn } from './o';\nimport { isUndefined, isFunction } from './type';\nexport var WEEK_TEXT = ['日', '一', '二', '三', '四', '五', '六'];\nexport var DATE_UNIT_TEXT = ['年', '月', '日'];\nexport var MONTH_TEXT = [\"\\u4E00\".concat(DATE_UNIT_TEXT[1]), \"\\u4E8C\".concat(DATE_UNIT_TEXT[1]), \"\\u4E09\".concat(DATE_UNIT_TEXT[1]), \"\\u56DB\".concat(DATE_UNIT_TEXT[1]), \"\\u4E94\".concat(DATE_UNIT_TEXT[1]), \"\\u516D\".concat(DATE_UNIT_TEXT[1]), \"\\u4E03\".concat(DATE_UNIT_TEXT[1]), \"\\u516B\".concat(DATE_UNIT_TEXT[1]), \"\\u4E5D\".concat(DATE_UNIT_TEXT[1]), \"\\u5341\".concat(DATE_UNIT_TEXT[1]), \"\\u5341\\u4E00\".concat(DATE_UNIT_TEXT[1]), \"\\u5341\\u4E8C\".concat(DATE_UNIT_TEXT[1])];\nexport var paddingZero = function paddingZero() {\n  var number = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return number < 10 ? \"0\".concat(number) : String(number);\n}; // 日期对象中添加一些东西\n\nexport var handleMomentObject = function handleMomentObject(_ref) {\n  var mObject = _ref.mObject,\n      status = _ref.status,\n      format = _ref.format,\n      valueFormat = _ref.valueFormat,\n      disabledRender = _ref.disabledRender;\n  var mJson = mObject.toObject();\n\n  if (hasOwn(mJson, 'months') && !isUndefined(mJson.months)) {\n    var months = mJson.months,\n        years = mJson.years;\n    var day = mObject.day();\n    var trueMonths = paddingZero(months + 1);\n    var trueValue = paddingZero(mJson.date);\n\n    var newMomentJson = _Object$assign(mJson, {\n      trueMonths: trueMonths,\n      day: day,\n      dayText: WEEK_TEXT[day],\n      trueValue: trueValue,\n      status: status,\n      value: mObject.format(valueFormat),\n      isoWeek: mObject.format(format),\n      isoWeekTitle: mObject.format(format),\n      inputValue: mObject.format(valueFormat),\n      title: \"\".concat(years).concat(DATE_UNIT_TEXT[0]).concat(trueMonths).concat(DATE_UNIT_TEXT[1]).concat(trueValue).concat(DATE_UNIT_TEXT[2])\n    });\n\n    return _Object$assign(newMomentJson, {\n      disabled: disabledRender && isFunction(disabledRender) ? disabledRender({\n        item: newMomentJson,\n        current: moment(mObject.format(format)),\n        type: 'date'\n      }) : false\n    });\n  }\n\n  return mJson;\n};\nexport var formatDateDefault = 'YYYY-MM-DD';\nexport var formatWeekDefault = 'YYYY 年 WW 周';\nexport var formatMonthDefault = 'YYYY-MM';\nexport var formatYearDefault = 'YYYY';\nexport var formatAgeDefault = 'YYYY-YYYY';\nexport var valueFormatDateDefault = 'YYYY-MM-DD';\nexport var valueFormatWeekDefault = 'YYYY-WW';\nexport var valueFormatMonthDefault = 'YYYY-MM';\nexport var valueFormatYearDefault = 'YYYY';\nexport var valueFormatAgeDefault = 'YYYY-YYYY';\nexport var formatDefault = {\n  date: formatDateDefault,\n  week: formatWeekDefault,\n  month: formatMonthDefault,\n  year: formatYearDefault,\n  age: formatAgeDefault\n};\nexport var valueFormatDefault = {\n  date: valueFormatDateDefault,\n  week: valueFormatWeekDefault,\n  month: valueFormatMonthDefault,\n  year: valueFormatYearDefault,\n  age: valueFormatAgeDefault\n}; // 渲染上月日期\n\nexport var renderPrevDates = function renderPrevDates(_ref2) {\n  var mJson = _ref2.mJson,\n      firstDayOfWeek = _ref2.firstDayOfWeek,\n      format = _ref2.format,\n      valueFormat = _ref2.valueFormat,\n      disabledRender = _ref2.disabledRender;\n  var trueMonths = mJson.trueMonths,\n      years = mJson.years;\n  var dates = [];\n  var prevDateNumbers = 0;\n  var currentMonth = Number(trueMonths);\n  var prevMonth = currentMonth > 1 ? currentMonth - 1 : 12;\n  var currentYear = currentMonth > 0 ? years : years - 1;\n  var prevDateAllNumbers = moment(\"\".concat(currentYear, \"-\").concat(prevMonth), formatMonthDefault).daysInMonth();\n  var maxNumber = Number(moment(\"\".concat(currentYear, \"-\").concat(trueMonths, \"-01\"), formatDateDefault).day()) - firstDayOfWeek;\n\n  while (prevDateNumbers < maxNumber) {\n    var momentLastItem = moment(\"\".concat(currentYear, \"-\").concat(paddingZero(prevMonth), \"-\").concat(paddingZero(prevDateAllNumbers - prevDateNumbers)), formatDateDefault);\n    dates.unshift(handleMomentObject({\n      mObject: momentLastItem,\n      status: 'prev',\n      format: format,\n      valueFormat: valueFormat,\n      disabledRender: disabledRender\n    }));\n    prevDateNumbers++;\n  }\n\n  return dates;\n}; // 渲染当月日期\n\nexport var renderCurrentDates = function renderCurrentDates(_ref3) {\n  var mJson = _ref3.mJson,\n      dateNumbers = _ref3.dateNumbers,\n      format = _ref3.format,\n      valueFormat = _ref3.valueFormat,\n      disabledRender = _ref3.disabledRender;\n  var trueMonths = mJson.trueMonths,\n      years = mJson.years;\n  var dates = [];\n\n  for (var index = 1; index <= dateNumbers; index++) {\n    var momentItem = moment(\"\".concat(years, \"-\").concat(trueMonths, \"-\").concat(paddingZero(index)), formatDateDefault);\n    dates.push(handleMomentObject({\n      mObject: momentItem,\n      status: 'current',\n      format: format,\n      valueFormat: valueFormat,\n      disabledRender: disabledRender\n    }));\n  }\n\n  return dates;\n}; // 渲染下月日期\n\nexport var renderNextDates = function renderNextDates(_ref4) {\n  var mJson = _ref4.mJson,\n      dateNumbers = _ref4.dateNumbers,\n      firstDayOfWeek = _ref4.firstDayOfWeek,\n      format = _ref4.format,\n      valueFormat = _ref4.valueFormat,\n      disabledRender = _ref4.disabledRender;\n  var trueMonths = mJson.trueMonths,\n      years = mJson.years;\n  var dates = [];\n  var nextDateNumbers = 0;\n  var currentMonth = Number(trueMonths);\n  var nextMonth = currentMonth < 12 ? currentMonth + 1 : 1;\n  var nextYear = currentMonth < 12 ? years : years + 1;\n  var weekNumber = WEEK_TEXT.length; // 一周 7 天\n\n  var maxNumber = weekNumber - Number(moment(\"\".concat(years, \"-\").concat(trueMonths, \"-\").concat(dateNumbers), formatDateDefault).day()) - firstDayOfWeek;\n\n  while (nextDateNumbers < maxNumber - 1) {\n    nextDateNumbers++;\n    var momentLastItem = moment(\"\".concat(nextYear, \"-\").concat(paddingZero(nextMonth), \"-\").concat(paddingZero(nextDateNumbers)), formatDateDefault);\n    dates.push(handleMomentObject({\n      mObject: momentLastItem,\n      status: 'next',\n      format: format,\n      valueFormat: valueFormat,\n      disabledRender: disabledRender\n    }));\n  }\n\n  return dates;\n}; // 不够 6 行 补齐\n\nexport var paddingDatesWithToSixLines = function paddingDatesWithToSixLines(_ref5) {\n  var allDates = _ref5.allDates,\n      disabledRender = _ref5.disabledRender,\n      format = _ref5.format,\n      valueFormat = _ref5.valueFormat;\n  var allLines = 6;\n  var nowLines = allDates.length / WEEK_TEXT.length;\n  var _allDates = allDates[allDates.length - 1],\n      trueMonths = _allDates.trueMonths,\n      trueValue = _allDates.trueValue,\n      years = _allDates.years,\n      value = _allDates.value;\n  var date6 = [];\n\n  if (trueMonths && nowLines < allLines) {\n    var dateNumbers = 0;\n    var startMonths = Number(trueMonths);\n    var startDates = Number(trueValue); // 如果是当前月份，说明整行当月结束\n\n    if (Number(trueValue) === moment(value, valueFormat).daysInMonth()) {\n      startMonths++;\n      startDates = 1;\n    } else {\n      startDates++;\n    }\n\n    while (dateNumbers < WEEK_TEXT.length) {\n      var momentItem = moment(\"\".concat(years, \"-\").concat(paddingZero(startMonths), \"-\").concat(paddingZero(startDates)), formatDateDefault);\n      date6.push(handleMomentObject({\n        mObject: momentItem,\n        status: 'next',\n        format: format,\n        valueFormat: valueFormat,\n        disabledRender: disabledRender\n      }));\n      dateNumbers++;\n      startDates++;\n    }\n  }\n\n  return date6;\n}; // 渲染当前面板信息\n\nexport var renderDates = function renderDates(_ref6) {\n  var mObject = _ref6.mObject,\n      firstDayOfWeek = _ref6.firstDayOfWeek,\n      format = _ref6.format,\n      valueFormat = _ref6.valueFormat,\n      disabledRender = _ref6.disabledRender;\n\n  var newParams = _Object$assign({}, {\n    firstDayOfWeek: firstDayOfWeek,\n    format: format,\n    valueFormat: valueFormat,\n    dateNumbers: mObject.daysInMonth(),\n    disabledRender: disabledRender,\n    mJson: handleMomentObject({\n      mObject: mObject,\n      status: 'default',\n      format: format,\n      valueFormat: valueFormat,\n      disabledRender: disabledRender\n    })\n  });\n\n  var allDates = concat(renderPrevDates(newParams), renderCurrentDates(newParams), renderNextDates(newParams));\n  return concat(allDates, paddingDatesWithToSixLines({\n    allDates: allDates,\n    disabledRender: disabledRender,\n    format: format,\n    valueFormat: valueFormat\n  }));\n};\nexport var generateRangeYear = function generateRangeYear(_ref7) {\n  var value = _ref7.value,\n      years = _ref7.years,\n      format = _ref7.format,\n      valueFormat = _ref7.valueFormat,\n      disabledRender = _ref7.disabledRender,\n      status = _ref7.status;\n  var newValue = String(value);\n  var disabledMoment = moment(newValue, formatYearDefault);\n  years.push({\n    value: disabledMoment.format(format),\n    trueValue: Number(value),\n    inputValue: disabledMoment.format(valueFormat),\n    title: String(value),\n    status: status,\n    disabled: isFunction(disabledRender) ? disabledRender({\n      item: disabledMoment.toObject(),\n      type: 'year',\n      current: disabledMoment\n    }) : false\n  });\n}; // 通过年份区间渲染年份 [2009,2011, ..., 2020]\n\nexport var renderYearsByRangeYear = function renderYearsByRangeYear(_ref8) {\n  var yearStart = _ref8.yearStart,\n      yearEnd = _ref8.yearEnd,\n      format = _ref8.format,\n      valueFormat = _ref8.valueFormat,\n      disabledRender = _ref8.disabledRender;\n  var years = [];\n  var year = yearStart;\n  generateRangeYear({\n    value: yearStart - 1,\n    status: 'prev',\n    format: format,\n    valueFormat: valueFormat,\n    years: years,\n    disabledRender: disabledRender\n  });\n\n  while (year <= yearEnd) {\n    generateRangeYear({\n      value: year,\n      status: 'current',\n      years: years,\n      format: format,\n      valueFormat: valueFormat,\n      disabledRender: disabledRender\n    });\n    year++;\n  }\n\n  generateRangeYear({\n    value: yearEnd + 1,\n    status: 'next',\n    years: years,\n    format: format,\n    valueFormat: valueFormat,\n    disabledRender: disabledRender\n  });\n  return {\n    years: years,\n    range: \"\".concat(yearStart, \"-\").concat(yearEnd)\n  };\n}; // 通过年算出当前年代\n\nexport var getRangeYear = function getRangeYear(nowYear) {\n  var yearHeader = String(nowYear).slice(0, 3);\n  var yearStart = Number(\"\".concat(yearHeader, \"0\"));\n  var yearEnd = yearStart + 9;\n  return {\n    range: \"\".concat(yearStart, \"-\").concat(yearEnd),\n    yearStart: yearStart,\n    yearEnd: yearEnd\n  };\n}; // 通过某年渲染年份 [2009,2011, ..., 2020]\n\nexport var renderYearsByYear = function renderYearsByYear(_ref9) {\n  var nowYear = _ref9.nowYear,\n      format = _ref9.format,\n      valueFormat = _ref9.valueFormat,\n      disabledRender = _ref9.disabledRender;\n  var yearHeader = String(nowYear).slice(0, 3);\n  var yearStart = Number(\"\".concat(yearHeader, \"0\"));\n  var yearEnd = yearStart + 9;\n  return renderYearsByRangeYear({\n    yearStart: yearStart,\n    yearEnd: yearEnd,\n    format: format,\n    valueFormat: valueFormat,\n    disabledRender: disabledRender\n  });\n};\nexport var generateAges = function generateAges(_ref10) {\n  var value = _ref10.value,\n      ages = _ref10.ages,\n      format = _ref10.format,\n      valueFormat = _ref10.valueFormat,\n      disabledRender = _ref10.disabledRender,\n      status = _ref10.status;\n  var valueList = value.split('-');\n\n  if (valueList.length === 2) {\n    var _valueList = _slicedToArray(valueList, 2),\n        startYear = _valueList[0],\n        endYear = _valueList[1];\n\n    var disabledStartMoment = moment(startYear, formatYearDefault);\n    var disabledEndMoment = moment(endYear, formatYearDefault);\n    var trueValueMoment = moment(value, valueFormat);\n    ages.push({\n      value: moment(value, format).format(format),\n      trueValue: trueValueMoment.isValid() ? trueValueMoment.format(valueFormat) : value,\n      title: value,\n      inputValue: value,\n      status: status,\n      disabled: isFunction(disabledRender) ? disabledRender({\n        item: {\n          start: disabledStartMoment.toObject(),\n          end: disabledEndMoment.toObject()\n        },\n        type: 'age',\n        current: {\n          start: disabledStartMoment,\n          end: disabledEndMoment\n        }\n      }) : false\n    });\n  }\n}; // 渲染年代 ['1890-1899', '1900-1909', ..., '1800-1809']\n\nexport var renderAges = function renderAges(_ref11) {\n  var range = _ref11.range,\n      format = _ref11.format,\n      valueFormat = _ref11.valueFormat,\n      disabledRender = _ref11.disabledRender;\n  var ages = [];\n  var ageHeader = range.split('-')[0].slice(0, 2);\n  var ageStart = Number(\"\".concat(ageHeader, \"00\"));\n  var step = 10;\n  var whileIndex = 0;\n  var ageEnd = ageStart + step - 1;\n  generateAges({\n    value: \"\".concat(ageStart - step, \"-\").concat(ageEnd - step),\n    ages: ages,\n    format: format,\n    valueFormat: valueFormat,\n    disabledRender: disabledRender,\n    status: 'prev'\n  });\n\n  while (whileIndex < step) {\n    generateAges({\n      value: \"\".concat(ageStart + whileIndex * step, \"-\").concat(ageEnd + whileIndex * step),\n      ages: ages,\n      format: format,\n      valueFormat: valueFormat,\n      disabledRender: disabledRender,\n      status: 'current'\n    });\n    whileIndex++;\n  }\n\n  generateAges({\n    value: \"\".concat(ageStart + whileIndex * step, \"-\").concat(ageEnd + whileIndex * step),\n    ages: ages,\n    format: format,\n    valueFormat: valueFormat,\n    disabledRender: disabledRender,\n    status: 'next'\n  });\n  return {\n    ages: ages,\n    range: \"\".concat(ageStart, \"-\").concat(ageEnd + (whileIndex - 1) * step)\n  };\n}; // 渲染月份\n\nexport var renderMonths = function renderMonths(_ref12) {\n  var year = _ref12.year,\n      format = _ref12.format,\n      valueFormat = _ref12.valueFormat,\n      disabledRender = _ref12.disabledRender;\n  var months = MONTH_TEXT.map(function (value, valueIndex) {\n    var monthMoment = moment(\"\".concat(year, \"-\").concat(paddingZero(valueIndex + 1)), formatMonthDefault);\n    return {\n      value: monthMoment.format(valueFormat),\n      inputValue: value,\n      trueValue: monthMoment.month() + 1,\n      title: value,\n      status: 'current',\n      disabled: isFunction(disabledRender) ? disabledRender({\n        item: handleMomentObject({\n          mObject: monthMoment,\n          status: 'current',\n          format: format,\n          valueFormat: valueFormat\n        }),\n        type: 'month',\n        current: monthMoment\n      }) : false\n    };\n  });\n  return {\n    months: months,\n    year: year\n  };\n};",{"version":3,"sources":["/Users/zhangyufan/em/testPro/vue-scale/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyufan/em/testPro/vue-scale/src/helper/date.ts"],"names":[],"mappings":"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","sourcesContent":["import moment, { Moment } from 'moment';\r\nimport concat from 'lodash/concat';\r\nimport { hasOwn } from './o';\r\nimport { isUndefined, isFunction } from './type';\r\n\r\nexport interface DateEntity {\r\n  years: number;\r\n  months: number;\r\n  date: number;\r\n  hours: number;\r\n  minutes: number;\r\n  seconds: number;\r\n  milliseconds: number;\r\n  isoWeek?: number;\r\n  day?: number; // 当前星期\r\n  status?: string;\r\n  dayText?: string; // 星期对应的文案\r\n  trueMonths?: string; // 真实的月份\r\n  trueValue?: string; // 真实的日期\r\n  value?: string; // 真正的日期\r\n  inputValue?: string; // 真正的显示日期\r\n  disabled?: boolean; // 是否禁用\r\n}\r\n\r\nexport interface RenderDatesEntity {\r\n  mObject: Moment;\r\n  firstDayOfWeek: number;\r\n  format: string;\r\n  valueFormat: string;\r\n  disabledRender: Function;\r\n}\r\n\r\nexport interface RenderMonthDatesEntity {\r\n  mJson: DateEntity;\r\n  dateNumbers: number;\r\n  firstDayOfWeek: number;\r\n  format: string;\r\n  valueFormat: string;\r\n  disabledRender: Function;\r\n}\r\n\r\nexport interface HandleMomentObjectEntity {\r\n  mObject: Moment;\r\n  status: string;\r\n  format: string;\r\n  valueFormat: string;\r\n  disabledRender?: Function;\r\n}\r\n\r\nexport const WEEK_TEXT: string[] = [\r\n  '日',\r\n  '一',\r\n  '二',\r\n  '三',\r\n  '四',\r\n  '五',\r\n  '六',\r\n];\r\n\r\nexport const DATE_UNIT_TEXT: string[] = ['年', '月', '日'];\r\n\r\nexport const MONTH_TEXT: string[] = [\r\n  `一${DATE_UNIT_TEXT[1]}`,\r\n  `二${DATE_UNIT_TEXT[1]}`,\r\n  `三${DATE_UNIT_TEXT[1]}`,\r\n  `四${DATE_UNIT_TEXT[1]}`,\r\n  `五${DATE_UNIT_TEXT[1]}`,\r\n  `六${DATE_UNIT_TEXT[1]}`,\r\n  `七${DATE_UNIT_TEXT[1]}`,\r\n  `八${DATE_UNIT_TEXT[1]}`,\r\n  `九${DATE_UNIT_TEXT[1]}`,\r\n  `十${DATE_UNIT_TEXT[1]}`,\r\n  `十一${DATE_UNIT_TEXT[1]}`,\r\n  `十二${DATE_UNIT_TEXT[1]}`,\r\n];\r\n\r\nexport const paddingZero = (number: number = 0): string => (number < 10 ? `0${number}` : String(number));\r\n\r\n// 日期对象中添加一些东西\r\nexport const handleMomentObject = ({\r\n  mObject,\r\n  status,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: HandleMomentObjectEntity): DateEntity => {\r\n  const mJson = mObject.toObject();\r\n  if (hasOwn(mJson, 'months') && !isUndefined(mJson.months)) {\r\n    const {\r\n      months,\r\n      years,\r\n    } = mJson;\r\n    const day = mObject.day();\r\n    const trueMonths = paddingZero(months + 1);\r\n    const trueValue = paddingZero(mJson.date);\r\n\r\n    const newMomentJson: DateEntity = Object.assign(mJson, {\r\n      trueMonths,\r\n      day,\r\n      dayText: WEEK_TEXT[day],\r\n      trueValue,\r\n      status,\r\n      value: mObject.format(valueFormat),\r\n      isoWeek: mObject.format(format),\r\n      isoWeekTitle: mObject.format(format),\r\n      inputValue: mObject.format(valueFormat),\r\n      title: `${years}${DATE_UNIT_TEXT[0]}${trueMonths}${DATE_UNIT_TEXT[1]}${trueValue}${DATE_UNIT_TEXT[2]}`,\r\n    });\r\n\r\n    return Object.assign(newMomentJson, {\r\n      disabled: disabledRender && isFunction(disabledRender) ? disabledRender({\r\n        item: newMomentJson,\r\n        current: moment(mObject.format(format)),\r\n        type: 'date',\r\n      }) : false,\r\n    });\r\n  }\r\n  return mJson;\r\n};\r\n\r\nexport const formatDateDefault: string = 'YYYY-MM-DD';\r\nexport const formatWeekDefault: string = 'YYYY 年 WW 周';\r\nexport const formatMonthDefault: string = 'YYYY-MM';\r\nexport const formatYearDefault: string = 'YYYY';\r\nexport const formatAgeDefault: string = 'YYYY-YYYY';\r\n\r\nexport const valueFormatDateDefault: string = 'YYYY-MM-DD';\r\nexport const valueFormatWeekDefault: string = 'YYYY-WW';\r\nexport const valueFormatMonthDefault: string = 'YYYY-MM';\r\nexport const valueFormatYearDefault: string = 'YYYY';\r\nexport const valueFormatAgeDefault: string = 'YYYY-YYYY';\r\n\r\nexport interface FormatDefaultEntity {\r\n  date: string;\r\n  week: string;\r\n  month: string;\r\n  year: string;\r\n  age: string;\r\n}\r\n\r\nexport const formatDefault: FormatDefaultEntity = {\r\n  date: formatDateDefault,\r\n  week: formatWeekDefault,\r\n  month: formatMonthDefault,\r\n  year: formatYearDefault,\r\n  age: formatAgeDefault,\r\n};\r\n\r\nexport const valueFormatDefault: FormatDefaultEntity = {\r\n  date: valueFormatDateDefault,\r\n  week: valueFormatWeekDefault,\r\n  month: valueFormatMonthDefault,\r\n  year: valueFormatYearDefault,\r\n  age: valueFormatAgeDefault,\r\n};\r\n\r\n// 渲染上月日期\r\nexport const renderPrevDates = ({\r\n  mJson,\r\n  firstDayOfWeek,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderMonthDatesEntity): DateEntity[] => {\r\n  const {\r\n    trueMonths,\r\n    years,\r\n  } = mJson;\r\n  const dates: DateEntity[] = [];\r\n\r\n  let prevDateNumbers = 0;\r\n  const currentMonth = Number(trueMonths);\r\n  const prevMonth = currentMonth > 1 ? currentMonth - 1 : 12;\r\n  const currentYear = currentMonth > 0 ? years : years - 1;\r\n\r\n  const prevDateAllNumbers = moment(`${currentYear}-${prevMonth}`, formatMonthDefault).daysInMonth();\r\n  const maxNumber = Number(moment(`${currentYear}-${trueMonths}-01`, formatDateDefault).day()) - firstDayOfWeek;\r\n\r\n  while (prevDateNumbers < maxNumber) {\r\n    const momentLastItem = moment(`${currentYear}-${paddingZero(prevMonth)}-${paddingZero(prevDateAllNumbers - prevDateNumbers)}`, formatDateDefault);\r\n    dates.unshift(handleMomentObject({\r\n      mObject: momentLastItem,\r\n      status: 'prev',\r\n      format,\r\n      valueFormat,\r\n      disabledRender,\r\n    }));\r\n    prevDateNumbers++;\r\n  }\r\n\r\n  return dates;\r\n};\r\n\r\n// 渲染当月日期\r\nexport const renderCurrentDates = ({\r\n  mJson,\r\n  dateNumbers,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderMonthDatesEntity): DateEntity[] => {\r\n  const {\r\n    trueMonths,\r\n    years,\r\n  } = mJson;\r\n  const dates: DateEntity[] = [];\r\n\r\n  for (let index = 1; index <= dateNumbers; index++) {\r\n    const momentItem = moment(`${years}-${trueMonths}-${paddingZero(index)}`, formatDateDefault);\r\n    dates.push(handleMomentObject({\r\n      mObject: momentItem,\r\n      status: 'current',\r\n      format,\r\n      valueFormat,\r\n      disabledRender,\r\n    }));\r\n  }\r\n\r\n  return dates;\r\n};\r\n\r\n// 渲染下月日期\r\nexport const renderNextDates = ({\r\n  mJson,\r\n  dateNumbers,\r\n  firstDayOfWeek,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderMonthDatesEntity): DateEntity[] => {\r\n  const {\r\n    trueMonths,\r\n    years,\r\n  } = mJson;\r\n  const dates: DateEntity[] = [];\r\n\r\n  let nextDateNumbers = 0;\r\n  const currentMonth = Number(trueMonths);\r\n  const nextMonth = currentMonth < 12 ? currentMonth + 1 : 1;\r\n  const nextYear = currentMonth < 12 ? years : years + 1;\r\n\r\n  const weekNumber: number = WEEK_TEXT.length; // 一周 7 天\r\n  const maxNumber = weekNumber - Number(moment(`${years}-${trueMonths}-${dateNumbers}`, formatDateDefault).day()) - firstDayOfWeek;\r\n\r\n  while (nextDateNumbers < maxNumber - 1) {\r\n    nextDateNumbers++;\r\n    const momentLastItem = moment(`${nextYear}-${paddingZero(nextMonth)}-${paddingZero(nextDateNumbers)}`, formatDateDefault);\r\n    dates.push(handleMomentObject({\r\n      mObject: momentLastItem,\r\n      status: 'next',\r\n      format,\r\n      valueFormat,\r\n      disabledRender,\r\n    }));\r\n  }\r\n\r\n  return dates;\r\n};\r\n\r\nexport interface PaddingDatesWithToSixLinesEntity {\r\n  allDates: DateEntity[];\r\n  disabledRender: Function;\r\n  format: string;\r\n  valueFormat: string;\r\n}\r\n\r\n// 不够 6 行 补齐\r\nexport const paddingDatesWithToSixLines = ({\r\n  allDates,\r\n  disabledRender,\r\n  format,\r\n  valueFormat,\r\n}: PaddingDatesWithToSixLinesEntity): DateEntity[] => {\r\n  const allLines: number = 6;\r\n  const nowLines: number = allDates.length / WEEK_TEXT.length;\r\n  const {\r\n    trueMonths,\r\n    trueValue,\r\n    years,\r\n    value,\r\n  } = allDates[allDates.length - 1];\r\n  const date6: DateEntity[] = [];\r\n\r\n  if (trueMonths && nowLines < allLines) {\r\n    let dateNumbers = 0;\r\n    let startMonths = Number(trueMonths);\r\n    let startDates = Number(trueValue);\r\n    // 如果是当前月份，说明整行当月结束\r\n    if (Number(trueValue) === moment(value, valueFormat).daysInMonth()) {\r\n      startMonths++;\r\n      startDates = 1;\r\n    } else {\r\n      startDates++;\r\n    }\r\n\r\n    while (dateNumbers < WEEK_TEXT.length) {\r\n      const momentItem = moment(`${years}-${paddingZero(startMonths)}-${paddingZero(startDates)}`, formatDateDefault);\r\n\r\n      date6.push(handleMomentObject({\r\n        mObject: momentItem,\r\n        status: 'next',\r\n        format,\r\n        valueFormat,\r\n        disabledRender,\r\n      }));\r\n\r\n      dateNumbers++;\r\n      startDates++;\r\n    }\r\n  }\r\n\r\n  return date6;\r\n};\r\n\r\n// 渲染当前面板信息\r\nexport const renderDates = ({\r\n  mObject,\r\n  firstDayOfWeek,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderDatesEntity): DateEntity[] => {\r\n  const newParams: RenderMonthDatesEntity = Object.assign({}, {\r\n    firstDayOfWeek,\r\n    format,\r\n    valueFormat,\r\n    dateNumbers: mObject.daysInMonth(),\r\n    disabledRender,\r\n    mJson: handleMomentObject({\r\n      mObject,\r\n      status: 'default',\r\n      format,\r\n      valueFormat,\r\n      disabledRender,\r\n    }),\r\n  });\r\n\r\n  const allDates: DateEntity[] = concat(\r\n    renderPrevDates(newParams),\r\n    renderCurrentDates(newParams),\r\n    renderNextDates(newParams),\r\n  );\r\n\r\n  return concat(\r\n    allDates,\r\n    paddingDatesWithToSixLines({\r\n      allDates,\r\n      disabledRender,\r\n      format,\r\n      valueFormat,\r\n    }),\r\n  );\r\n};\r\n\r\nexport interface YearInYearsEntity {\r\n  title: string;\r\n  value: string;\r\n  trueValue: number;\r\n  inputValue: string;\r\n  status: string;\r\n  disabled: boolean;\r\n}\r\n\r\nexport interface YearsEntity {\r\n  years: YearInYearsEntity[];\r\n  range: string;\r\n}\r\n\r\nexport interface RenderYearsByRangeYearEntity {\r\n  yearStart: number;\r\n  yearEnd: number;\r\n  format: string,\r\n  valueFormat: string,\r\n  disabledRender: Function;\r\n}\r\n\r\nexport interface GenerateRangeEntity {\r\n  value: string | number;\r\n  status: string;\r\n  format: string,\r\n  valueFormat: string,\r\n  years: YearInYearsEntity[];\r\n  disabledRender: Function;\r\n}\r\n\r\nexport const generateRangeYear = ({\r\n  value,\r\n  years,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n  status,\r\n}: GenerateRangeEntity) => {\r\n  const newValue = String(value);\r\n  const disabledMoment = moment(newValue, formatYearDefault);\r\n  years.push({\r\n    value: disabledMoment.format(format),\r\n    trueValue: Number(value),\r\n    inputValue: disabledMoment.format(valueFormat),\r\n    title: String(value),\r\n    status,\r\n    disabled: isFunction(disabledRender) ? disabledRender({\r\n      item: disabledMoment.toObject(),\r\n      type: 'year',\r\n      current: disabledMoment,\r\n    }) : false,\r\n  });\r\n};\r\n\r\n// 通过年份区间渲染年份 [2009,2011, ..., 2020]\r\nexport const renderYearsByRangeYear = ({\r\n  yearStart,\r\n  yearEnd,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderYearsByRangeYearEntity): YearsEntity => {\r\n  const years: YearInYearsEntity[] = [];\r\n  let year = yearStart;\r\n\r\n  generateRangeYear({\r\n    value: yearStart - 1,\r\n    status: 'prev',\r\n    format,\r\n    valueFormat,\r\n    years,\r\n    disabledRender,\r\n  });\r\n\r\n  while (year <= yearEnd) {\r\n    generateRangeYear({\r\n      value: year,\r\n      status: 'current',\r\n      years,\r\n      format,\r\n      valueFormat,\r\n      disabledRender,\r\n    });\r\n    year++;\r\n  }\r\n\r\n  generateRangeYear({\r\n    value: yearEnd + 1,\r\n    status: 'next',\r\n    years,\r\n    format,\r\n    valueFormat,\r\n    disabledRender,\r\n  });\r\n\r\n  return {\r\n    years,\r\n    range: `${yearStart}-${yearEnd}`,\r\n  };\r\n};\r\n\r\nexport interface RangeYearEntity {\r\n  range: string;\r\n  yearStart: number;\r\n  yearEnd: number;\r\n}\r\n\r\n// 通过年算出当前年代\r\nexport const getRangeYear = (nowYear: number): RangeYearEntity => {\r\n  const yearHeader: string = String(nowYear).slice(0, 3);\r\n  const yearStart: number = Number(`${yearHeader}0`);\r\n  const yearEnd: number = yearStart + 9;\r\n\r\n  return {\r\n    range: `${yearStart}-${yearEnd}`,\r\n    yearStart,\r\n    yearEnd,\r\n  };\r\n};\r\n\r\nexport interface RenderYearsByYear {\r\n  nowYear: number;\r\n  format: string,\r\n  valueFormat: string,\r\n  disabledRender: Function;\r\n}\r\n\r\n// 通过某年渲染年份 [2009,2011, ..., 2020]\r\nexport const renderYearsByYear = ({\r\n  nowYear,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderYearsByYear): YearsEntity => {\r\n  const yearHeader: string = String(nowYear).slice(0, 3);\r\n  const yearStart: number = Number(`${yearHeader}0`);\r\n  const yearEnd: number = yearStart + 9;\r\n\r\n  return renderYearsByRangeYear({\r\n    yearStart,\r\n    yearEnd,\r\n    format,\r\n    valueFormat,\r\n    disabledRender,\r\n  });\r\n};\r\n\r\nexport interface AgesInAgesEntity {\r\n  value: string;\r\n  inputValue: string;\r\n  trueValue: string;\r\n  title: string;\r\n  status: string;\r\n  disabled: boolean;\r\n}\r\n\r\nexport interface AgesEntity {\r\n  ages: AgesInAgesEntity[];\r\n  range: string;\r\n}\r\n\r\nexport interface RenderAgesEntity {\r\n  range: string;\r\n  format: string;\r\n  valueFormat: string;\r\n  disabledRender: Function;\r\n}\r\n\r\nexport interface GenerateAgesEntity {\r\n  value: string;\r\n  status: string;\r\n  format: string;\r\n  valueFormat: string;\r\n  ages: AgesInAgesEntity[];\r\n  disabledRender: Function;\r\n}\r\n\r\nexport const generateAges = ({\r\n  value,\r\n  ages,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n  status,\r\n}: GenerateAgesEntity): void => {\r\n  const valueList = value.split('-');\r\n  if (valueList.length === 2) {\r\n    const [startYear, endYear] = valueList;\r\n    const disabledStartMoment = moment(startYear, formatYearDefault);\r\n    const disabledEndMoment = moment(endYear, formatYearDefault);\r\n    const trueValueMoment = moment(value, valueFormat);\r\n\r\n    ages.push({\r\n      value: moment(value, format).format(format),\r\n      trueValue: trueValueMoment.isValid() ? trueValueMoment.format(valueFormat) : value,\r\n      title: value,\r\n      inputValue: value,\r\n      status,\r\n      disabled: isFunction(disabledRender) ? disabledRender({\r\n        item: {\r\n          start: disabledStartMoment.toObject(),\r\n          end: disabledEndMoment.toObject(),\r\n        },\r\n        type: 'age',\r\n        current: {\r\n          start: disabledStartMoment,\r\n          end: disabledEndMoment,\r\n        },\r\n      }) : false,\r\n    });\r\n  }\r\n};\r\n\r\n// 渲染年代 ['1890-1899', '1900-1909', ..., '1800-1809']\r\nexport const renderAges = ({\r\n  range,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderAgesEntity): AgesEntity => {\r\n  const ages: AgesInAgesEntity[] = [];\r\n  const ageHeader: string = range.split('-')[0].slice(0, 2);\r\n  const ageStart: number = Number(`${ageHeader}00`);\r\n  const step: number = 10;\r\n  let whileIndex: number = 0;\r\n  const ageEnd: number = ageStart + step - 1;\r\n\r\n  generateAges({\r\n    value: `${ageStart - step}-${ageEnd - step}`,\r\n    ages,\r\n    format,\r\n    valueFormat,\r\n    disabledRender,\r\n    status: 'prev',\r\n  });\r\n\r\n  while (whileIndex < step) {\r\n    generateAges({\r\n      value: `${ageStart + whileIndex * step}-${ageEnd + whileIndex * step}`,\r\n      ages,\r\n      format,\r\n      valueFormat,\r\n      disabledRender,\r\n      status: 'current',\r\n    });\r\n    whileIndex++;\r\n  }\r\n\r\n\r\n  generateAges({\r\n    value: `${ageStart + whileIndex * step}-${ageEnd + whileIndex * step}`,\r\n    ages,\r\n    format,\r\n    valueFormat,\r\n    disabledRender,\r\n    status: 'next',\r\n  });\r\n\r\n  return {\r\n    ages,\r\n    range: `${ageStart}-${ageEnd + (whileIndex - 1) * step}`,\r\n  };\r\n};\r\n\r\nexport interface MonthInMonthsEntity {\r\n  value: string;\r\n  inputValue: string;\r\n  trueValue: number;\r\n  status: string;\r\n  title: string;\r\n  disabled: boolean;\r\n}\r\n\r\nexport interface MonthsEntity {\r\n  months: MonthInMonthsEntity[];\r\n  year: number;\r\n}\r\n\r\nexport interface RenderMonthsEntity {\r\n  year: number;\r\n  format: string;\r\n  valueFormat: string;\r\n  disabledRender: Function;\r\n}\r\n\r\n// 渲染月份\r\nexport const renderMonths = ({\r\n  year,\r\n  format,\r\n  valueFormat,\r\n  disabledRender,\r\n}: RenderMonthsEntity): MonthsEntity => {\r\n  const months: MonthInMonthsEntity[] = MONTH_TEXT.map((\r\n    value: string,\r\n    valueIndex: number,\r\n  ): MonthInMonthsEntity => {\r\n    const monthMoment = moment(`${year}-${paddingZero(valueIndex + 1)}`, formatMonthDefault);\r\n    return {\r\n      value: monthMoment.format(valueFormat),\r\n      inputValue: value,\r\n      trueValue: monthMoment.month() + 1,\r\n      title: value,\r\n      status: 'current',\r\n      disabled: isFunction(disabledRender) ? disabledRender({\r\n        item: handleMomentObject({\r\n          mObject: monthMoment,\r\n          status: 'current',\r\n          format,\r\n          valueFormat,\r\n        }),\r\n        type: 'month',\r\n        current: monthMoment,\r\n      }) : false,\r\n    };\r\n  });\r\n\r\n  return {\r\n    months,\r\n    year,\r\n  };\r\n};\r\n"],"sourceRoot":""}]}