{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js!/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js??ref--14-2!/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/affix/Affix.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/components/affix/Affix.vue","mtime":1573474128000},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js","mtime":1574242632071},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js","mtime":1574332289889},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js","mtime":1574242648574}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _classCallCheck from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Prop, Emit, Vue } from 'vue-property-decorator';\nimport { addObserved, removeObserved } from './helper';\nimport getScroll from '../../helper/getscroll';\nimport getOffset from '../../helper/getoffset';\nimport { isNumber } from '../../helper/type';\n\nvar Affix =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Affix, _Vue);\n\n  function Affix() {\n    var _this;\n\n    _classCallCheck(this, Affix);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Affix).apply(this, arguments));\n    _this.affixStyle = '';\n    _this.target = window;\n    return _this;\n  }\n\n  _createClass(Affix, [{\n    key: \"mounted\",\n    value: function mounted() {\n      addObserved(this.target, this.updatePostion);\n      this.updatePostion();\n    }\n  }, {\n    key: \"beforeDestroy\",\n    value: function beforeDestroy() {\n      if (this.destroy) {\n        removeObserved(this.target);\n      }\n    }\n  }, {\n    key: \"updatePostion\",\n    value: function updatePostion() {\n      var _this$$el = this.$el,\n          offsetWidth = _this$$el.offsetWidth,\n          offsetHeight = _this$$el.offsetHeight;\n      var scrollTop = getScroll(this.target, true);\n      var elOffset = getOffset(this.$el);\n      var windowHeight = window.innerHeight;\n      var isStatic = this.offsetIsTop && elOffset.top - this.offsetValue <= scrollTop || !this.offsetIsTop && elOffset.top + this.offsetBottom + offsetHeight > scrollTop + windowHeight;\n      var sticky = !this.disabled && isStatic;\n      var position = sticky ? \"position: \".concat(this.position, \"; zIndex: \").concat(this.index, \";\") : '';\n      var offset = sticky ? \"\".concat(this.offsetType, \": \").concat(this.offsetValue, \"px; width: \").concat(offsetWidth, \"px\") : '';\n      this.affixStyle = \"\".concat(position).concat(offset);\n      var changeEmit = {\n        affixStatus: sticky,\n        scrollStatus: isStatic\n      };\n      this.change(changeEmit);\n      return changeEmit;\n    }\n  }, {\n    key: \"offsetType\",\n    get: function get() {\n      return isNumber(this.offsetBottom) ? 'bottom' : 'top';\n    }\n  }, {\n    key: \"offsetValue\",\n    get: function get() {\n      var valueDefault = 10;\n\n      if (isNumber(this.offsetTop)) {\n        valueDefault = this.offsetTop;\n      }\n\n      if (isNumber(this.offsetBottom)) {\n        valueDefault = this.offsetBottom;\n      }\n\n      return valueDefault;\n    }\n  }, {\n    key: \"offsetIsTop\",\n    get: function get() {\n      return this.offsetType === 'top';\n    }\n  }]);\n\n  return Affix;\n}(Vue);\n\ntslib_1.__decorate([Prop(Number)], Affix.prototype, \"offsetTop\", void 0);\n\ntslib_1.__decorate([Prop(Number)], Affix.prototype, \"offsetBottom\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Number,\n  default: 10\n})], Affix.prototype, \"index\", void 0);\n\ntslib_1.__decorate([Prop(Boolean)], Affix.prototype, \"disabled\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Boolean,\n  default: true\n})], Affix.prototype, \"destroy\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: String,\n  default: 'fixed'\n})], Affix.prototype, \"position\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Function,\n  default: function _default() {}\n})], Affix.prototype, \"change\", void 0);\n\ntslib_1.__decorate([Emit('change')], Affix.prototype, \"updatePostion\", null);\n\nAffix = tslib_1.__decorate([Component], Affix);\nexport default Affix;",{"version":3,"sources":["/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/affix/Affix.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\r\nimport {\r\n  Component, Prop, Emit, Vue,\r\n} from 'vue-property-decorator';\r\nimport {\r\n  addObserved, removeObserved,\r\n} from './helper';\r\nimport getScroll from '../../helper/getscroll';\r\nimport getOffset from '../../helper/getoffset';\r\nimport { isNumber } from '../../helper/type';\r\n\r\ninterface AffixEntity {\r\n  [offsetPlace: string]: number;\r\n}\r\n\r\nexport interface ChangeEntity {\r\n  affixStatus: boolean;\r\n  scrollStatus: boolean;\r\n}\r\n\r\n@Component\r\nexport default class Affix extends Vue {\r\n  affixStyle: String = '';\r\n\r\n  target: Window = window;\r\n\r\n  @Prop(Number) private offsetTop!: number;\r\n\r\n  @Prop(Number) private offsetBottom!: number;\r\n\r\n  @Prop({\r\n    type: Number,\r\n    default: 10,\r\n  }) private index!: number;\r\n\r\n  @Prop(Boolean) private disabled!: boolean;\r\n\r\n  @Prop({\r\n    type: Boolean,\r\n    default: true,\r\n  }) private destroy!: boolean;\r\n\r\n  @Prop({\r\n    type: String,\r\n    default: 'fixed',\r\n  }) private position!: string;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: () => {},\r\n  }) private change!: Function;\r\n\r\n  get offsetType(): string {\r\n    return isNumber(this.offsetBottom) ? 'bottom' : 'top';\r\n  }\r\n\r\n  get offsetValue(): number {\r\n    let valueDefault = 10;\r\n    if (isNumber(this.offsetTop)) {\r\n      valueDefault = this.offsetTop;\r\n    }\r\n    if (isNumber(this.offsetBottom)) {\r\n      valueDefault = this.offsetBottom;\r\n    }\r\n    return valueDefault;\r\n  }\r\n\r\n  get offsetIsTop(): boolean {\r\n    return this.offsetType === 'top';\r\n  }\r\n\r\n  mounted() {\r\n    addObserved(this.target, this.updatePostion);\r\n    this.updatePostion();\r\n  }\r\n\r\n  beforeDestroy() {\r\n    if (this.destroy) {\r\n      removeObserved(this.target);\r\n    }\r\n  }\r\n\r\n  @Emit('change')\r\n  updatePostion() {\r\n    const { offsetWidth, offsetHeight } = this.$el as HTMLElement;\r\n\r\n    const scrollTop = getScroll(this.target, true);\r\n    const elOffset = getOffset(this.$el as HTMLElement);\r\n    const windowHeight = window.innerHeight;\r\n    const isStatic: boolean = (\r\n      this.offsetIsTop\r\n        && (elOffset.top - this.offsetValue) <= scrollTop\r\n    )\r\n    || (\r\n      !this.offsetIsTop\r\n      && (\r\n        elOffset.top + this.offsetBottom + offsetHeight) > (scrollTop + windowHeight\r\n      )\r\n    );\r\n    const sticky: boolean = !this.disabled && isStatic;\r\n    const position = sticky ? `position: ${this.position}; zIndex: ${this.index};` : '';\r\n    const offset: string = sticky ? `${this.offsetType}: ${this.offsetValue}px; width: ${offsetWidth}px` : '';\r\n    this.affixStyle = `${position}${offset}`;\r\n\r\n    const changeEmit: ChangeEntity = {\r\n      affixStatus: sticky,\r\n      scrollStatus: isStatic,\r\n    };\r\n\r\n    this.change(changeEmit);\r\n\r\n    return changeEmit;\r\n  }\r\n}\r\n"],"sourceRoot":""}]}