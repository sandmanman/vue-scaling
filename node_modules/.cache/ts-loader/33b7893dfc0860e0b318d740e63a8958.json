{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js!/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js??ref--14-2!/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/page/Page.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/components/page/Page.vue","mtime":1574492723828},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/babel-loader/lib/index.js","mtime":1574242632071},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/ts-loader/index.js","mtime":1574332289889},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js","mtime":1574242648574}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _classCallCheck from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhangyufan/em/testPro/vue-scale/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Model, Prop, Emit, Vue, Watch } from 'vue-property-decorator';\nimport { noop } from '@/helper/noop';\nimport WInput from '../input/Input.vue';\nimport WButton from '../button/Button.vue';\nimport WButtonGroup from '../button/ButtonGroup.vue';\n\nvar Page =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Page, _Vue);\n\n  function Page() {\n    var _this;\n\n    _classCallCheck(this, Page);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Page).apply(this, arguments));\n    _this.name = 'Page';\n    _this.current = 1;\n    return _this;\n  }\n\n  _createClass(Page, [{\n    key: \"mounted\",\n    value: function mounted() {\n      this.setNow(this.value, false);\n    }\n  }, {\n    key: \"setNow\",\n    value: function setNow(value) {\n      var canEmit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      this.current = Math.min(value || 1, this.pageNumber);\n      this.current = Math.max(this.current, 1);\n\n      if (canEmit) {\n        this.change(this.current);\n        this.$emit('change', this.current);\n        this.returnModel();\n      }\n    }\n  }, {\n    key: \"returnModel\",\n    value: function returnModel() {\n      return this.current;\n    }\n  }, {\n    key: \"nextPage\",\n    value: function nextPage() {\n      this.setNow(++this.current);\n    }\n  }, {\n    key: \"prevPage\",\n    value: function prevPage() {\n      this.setNow(--this.current);\n    }\n  }, {\n    key: \"simpleChange\",\n    value: function simpleChange(ev) {\n      this.setNow(ev.target.value);\n    } // 改变的时候当前页有可能超出总共页数，所以重置\n\n  }, {\n    key: \"resetCurrent\",\n    value: function resetCurrent() {\n      this.current = 1;\n      this.setNow(this.current, false);\n      this.returnModel();\n    } // 改变的时候当前页有可能超出总共页数，所以重置\n\n  }, {\n    key: \"getValue\",\n    value: function getValue(val) {\n      this.setNow(val, false);\n    }\n  }, {\n    key: \"isNormalMode\",\n    get: function get() {\n      return !this.simple;\n    }\n  }, {\n    key: \"isSmallSize\",\n    get: function get() {\n      return this.isNormalMode && this.size === 'small';\n    }\n  }, {\n    key: \"pageNumber\",\n    get: function get() {\n      return Math.ceil(this.total / this.pageSize);\n    }\n  }, {\n    key: \"nextDisable\",\n    get: function get() {\n      return this.current >= this.pageNumber;\n    }\n  }, {\n    key: \"prevDisable\",\n    get: function get() {\n      return this.current < 2;\n    }\n  }, {\n    key: \"midleSizeValue\",\n    get: function get() {\n      var length = this.midleSize % 2 === 0 ? this.midleSize + 1 : this.midleSize; // 最大 7\n\n      length = Math.min(length, 7); // 最大 3\n\n      length = Math.max(length, 3); // 并且不能大于总页数\n\n      length = Math.min(length, this.pageNumber);\n      return length;\n    }\n  }, {\n    key: \"midleNumber\",\n    get: function get() {\n      var midle = []; // 四舍五入，当 100 条，每页 20 条\n\n      var step = Math.ceil((this.midleSizeValue - 1) / 2);\n      var first = Math.min(this.current > step ? this.current - step : 1, this.pageNumber - this.midleSizeValue + 1);\n\n      while (midle.length < this.midleSizeValue) {\n        midle.push(first++);\n      }\n\n      return midle;\n    }\n  }, {\n    key: \"itemEnd\",\n    get: function get() {\n      return this.pageSize * (this.current - 1) + (Math.ceil(this.total / this.pageSize) === this.current ? this.total % this.pageSize : this.pageSize);\n    }\n  }, {\n    key: \"totalText\",\n    get: function get() {\n      return this.showTotal({\n        total: this.total,\n        range: [1 + this.pageSize * (this.current - 1), this.itemEnd]\n      });\n    }\n  }]);\n\n  return Page;\n}(Vue);\n\ntslib_1.__decorate([Model('model', {\n  type: Number\n})], Page.prototype, \"value\", void 0);\n\ntslib_1.__decorate([Prop(String)], Page.prototype, \"prevText\", void 0);\n\ntslib_1.__decorate([Prop(String)], Page.prototype, \"nextText\", void 0);\n\ntslib_1.__decorate([Prop(String)], Page.prototype, \"size\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Number,\n  default: 50\n})], Page.prototype, \"total\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Number,\n  default: 5\n})], Page.prototype, \"midleSize\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Number,\n  default: 10\n})], Page.prototype, \"pageSize\", void 0);\n\ntslib_1.__decorate([Prop(Boolean)], Page.prototype, \"simple\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Function,\n  default: noop\n})], Page.prototype, \"change\", void 0);\n\ntslib_1.__decorate([Prop({\n  type: Function,\n  default: noop\n})], Page.prototype, \"showTotal\", void 0);\n\ntslib_1.__decorate([Emit('model')], Page.prototype, \"returnModel\", null);\n\ntslib_1.__decorate([Watch('pageSize'), Watch('total')], Page.prototype, \"resetCurrent\", null);\n\ntslib_1.__decorate([Watch('value')], Page.prototype, \"getValue\", null);\n\nPage = tslib_1.__decorate([Component({\n  components: {\n    WButton: WButton,\n    WButtonGroup: WButtonGroup,\n    WInput: WInput\n  }\n})], Page);\nexport default Page;",{"version":3,"sources":["/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/page/Page.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {\r\n  Component,\r\n  Model,\r\n  Prop,\r\n  Emit,\r\n  Vue,\r\n  Watch,\r\n} from 'vue-property-decorator';\r\nimport { noop } from '@/helper/noop';\r\nimport WInput from '../input/Input.vue';\r\nimport WButton from '../button/Button.vue';\r\nimport WButtonGroup from '../button/ButtonGroup.vue';\r\n\r\ninterface ShowTotalEntity {\r\n  showTotal: Function;\r\n}\r\n\r\n@Component({\r\n  components: {\r\n    WButton,\r\n    WButtonGroup,\r\n    WInput,\r\n  },\r\n})\r\nexport default class Page extends Vue {\r\n  name: string = 'Page';\r\n\r\n  current: number = 1;\r\n\r\n  @Model('model', { type: Number }) readonly value!: number;\r\n\r\n  @Prop(String) private prevText!: string;\r\n\r\n  @Prop(String) private nextText!: string;\r\n\r\n  @Prop(String) private size!: string;\r\n\r\n  @Prop({\r\n    type: Number,\r\n    default: 50,\r\n  }) private total!: number;\r\n\r\n  @Prop({\r\n    type: Number,\r\n    default: 5,\r\n  }) private midleSize!: number;\r\n\r\n  @Prop({\r\n    type: Number,\r\n    default: 10,\r\n  }) private pageSize!: number;\r\n\r\n  @Prop(Boolean) private simple!: boolean;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: noop,\r\n  }) private change?: Function;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: noop,\r\n  })\r\n  private showTotal!: Function;\r\n\r\n  get isNormalMode(): boolean {\r\n    return !this.simple;\r\n  }\r\n\r\n  get isSmallSize(): boolean {\r\n    return this.isNormalMode && this.size === 'small';\r\n  }\r\n\r\n  get pageNumber(): number {\r\n    return Math.ceil(this.total / this.pageSize);\r\n  }\r\n\r\n  get nextDisable(): boolean {\r\n    return this.current >= this.pageNumber;\r\n  }\r\n\r\n  get prevDisable(): boolean {\r\n    return this.current < 2;\r\n  }\r\n\r\n  get midleSizeValue(): number {\r\n    let length = this.midleSize % 2 === 0 ? this.midleSize + 1 : this.midleSize;\r\n    // 最大 7\r\n    length = Math.min(length, 7);\r\n    // 最大 3\r\n    length = Math.max(length, 3);\r\n    // 并且不能大于总页数\r\n    length = Math.min(length, this.pageNumber);\r\n    return length;\r\n  }\r\n\r\n  get midleNumber(): number[] {\r\n    const midle = [];\r\n    // 四舍五入，当 100 条，每页 20 条\r\n    const step = Math.ceil((this.midleSizeValue - 1) / 2);\r\n    let first = Math.min(\r\n      this.current > step ? this.current - step : 1,\r\n      this.pageNumber - this.midleSizeValue + 1,\r\n    );\r\n    while (midle.length < this.midleSizeValue) {\r\n      midle.push(first++);\r\n    }\r\n    return midle;\r\n  }\r\n\r\n  get itemEnd(): number {\r\n    return this.pageSize * (this.current - 1)\r\n            + (\r\n              Math.ceil(this.total / this.pageSize) === this.current\r\n                ? this.total % this.pageSize : this.pageSize\r\n            );\r\n  }\r\n\r\n  get totalText(): string {\r\n    return (this.showTotal as Function)(\r\n      {\r\n        total: this.total,\r\n        range: [\r\n          1 + this.pageSize * (this.current - 1),\r\n          this.itemEnd,\r\n        ],\r\n      },\r\n    );\r\n  }\r\n\r\n  mounted() {\r\n    this.setNow(this.value, false);\r\n  }\r\n\r\n  setNow(value: number, canEmit: boolean = true) {\r\n    this.current = Math.min(value || 1, this.pageNumber);\r\n    this.current = Math.max(this.current, 1);\r\n\r\n    if (canEmit) {\r\n      (this.change as Function)(this.current);\r\n      this.$emit('change', this.current);\r\n      this.returnModel();\r\n    }\r\n  }\r\n\r\n  @Emit('model')\r\n  returnModel(): number {\r\n    return this.current;\r\n  }\r\n\r\n  nextPage() {\r\n    this.setNow(++this.current);\r\n  }\r\n\r\n  prevPage() {\r\n    this.setNow(--this.current);\r\n  }\r\n\r\n  simpleChange(ev: MouseEvent) {\r\n    this.setNow((ev.target as any).value);\r\n  }\r\n\r\n  // 改变的时候当前页有可能超出总共页数，所以重置\r\n  @Watch('pageSize')\r\n  @Watch('total')\r\n  resetCurrent() {\r\n    this.current = 1;\r\n    this.setNow(this.current, false);\r\n    this.returnModel();\r\n  }\r\n\r\n  // 改变的时候当前页有可能超出总共页数，所以重置\r\n  @Watch('value')\r\n  getValue(val: number) {\r\n    this.setNow(val, false);\r\n  }\r\n}\r\n"],"sourceRoot":""}]}