{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/page/Page.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/components/page/Page.vue","mtime":1574492723828},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/css-loader/index.js","mtime":1573721989187},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1574242648574},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/postcss-loader/src/index.js","mtime":1573721998387},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/sass-loader/lib/loader.js","mtime":1574242652692},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js","mtime":1574242648574}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"page.scss\";\n",{"version":3,"sources":["Page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6UA","file":"Page.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n  <div class=\"w-page\" v-if=\"isNormalMode\">\r\n    <span class=\"w-page-text\" v-if=\"totalText\">{{totalText}}</span>\r\n    <w-button\r\n      :class=\"[\r\n        'w-page-button w-page-prev',\r\n        {\r\n          ['w-page-prev-sm']: isSmallSize,\r\n          ['w-page-prev-disable']: prevDisable,\r\n        }\r\n      ]\"\r\n      :size=\"size\"\r\n      type=\"border\"\r\n      :disabled=\"prevDisable\"\r\n      @click=\"prevPage\"\r\n    >\r\n      <template v-if=\"prevText\">{{prevText}}</template>\r\n      <i class=\"w-page-simple-arrow w-page-simple-arrow-prev\" v-else></i>\r\n    </w-button>\r\n    <!-- 第一页 start -->\r\n    <w-button\r\n      :class=\"[\r\n        'w-page-button',\r\n        {\r\n          ['w-page-button-sm']: isSmallSize,\r\n        },\r\n        'w-page-first',\r\n      ]\"\r\n      :type=\"current === 0 ? '' : 'border'\"\r\n      :size=\"size\"\r\n      v-if=\"midleNumber[0] > 1 && current > midleSizeValue - (midleSizeValue - 1) / 2\"\r\n      @click.native=\"setNow(1)\"\r\n    >1</w-button>\r\n    <!-- 第一页 end -->\r\n    <!-- 左 ••• start -->\r\n    <div\r\n      class=\"w-page-over\"\r\n      :class=\"[\r\n        {\r\n          ['w-page-over-sm']: isSmallSize,\r\n        },\r\n        'w-page-over-prev',\r\n        {\r\n          ['w-page-over-prev-sm']: isSmallSize,\r\n        },\r\n      ]\"\r\n      v-if=\"midleNumber[0] > 2\"\r\n      @click=\"setNow(current - 5)\"\r\n    ></div>\r\n    <!-- 左 ••• end -->\r\n\r\n    <!-- <w-button-group :class=\"['w-page-button-group']\"> -->\r\n      <w-button\r\n        :class=\"['w-page-button', {\r\n          ['w-page-button-sm']: isSmallSize,\r\n        }]\"\r\n        :size=\"size\"\r\n        :key=\"midle\"\r\n        :type=\"current === midle ? '' : 'border'\"\r\n        v-for=\"midle in midleNumber\"\r\n        @click.native=\"setNow(midle)\"\r\n      >{{midle}}</w-button>\r\n    <!-- </w-button-group> -->\r\n\r\n    <!-- 右 ••• start  v-if=\"current < 7\" -->\r\n    <div\r\n      class=\"w-page-over\"\r\n      :class=\"[\r\n        {\r\n          ['w-page-over-sm']: isSmallSize,\r\n        },\r\n        'w-page-over-next',\r\n        {\r\n          ['w-page-over-next-sm']: isSmallSize,\r\n        }\r\n      ]\"\r\n      v-if=\"\r\n        midleNumber[midleNumber.length - 1] < pageNumber\r\n        && current < (pageNumber - (midleSizeValue - 1) / 2 - 1)\r\n      \"\r\n      @click=\"setNow(current + 5)\"\r\n    ></div>\r\n    <!-- 右 ••• end -->\r\n    <!-- 最后一页 start  v-if=\"current < 8\" -->\r\n    <w-button\r\n      :class=\"[\r\n      'w-page-button',\r\n        {\r\n        ['w-page-button-sm']: isSmallSize,\r\n        },\r\n        'w-page-last'\r\n      ]\"\r\n      :size=\"size\"\r\n      :type=\"current === midleNumber[midleNumber.length - 1] ? '' : 'border'\"\r\n      v-if=\"\r\n        midleNumber[midleNumber.length - 1] < pageNumber\r\n        && current < (pageNumber - (midleSizeValue - 1) / 2)\r\n      \"\r\n      @click.native=\"setNow(pageNumber)\"\r\n    >{{pageNumber}}</w-button>\r\n      <!-- 最后一页 end -->\r\n    <w-button\r\n      :class=\"[\r\n      'w-page-button w-page-next',\r\n      {\r\n        ['w-page-next-sm']: isSmallSize,\r\n        ['w-page-next-disable']: nextDisable,\r\n      }\r\n      ]\"\r\n      :size=\"size\"\r\n      type=\"border\"\r\n      :disabled=\"nextDisable\"\r\n      @click=\"nextPage\"\r\n    >\r\n      <template v-if=\"nextText\">{{nextText}}</template>\r\n      <i class=\"w-page-simple-arrow w-page-simple-arrow-next\" v-else></i>\r\n    </w-button>\r\n  </div>\r\n  <!-- simple start -->\r\n  <div class=\"w-page\" v-else>\r\n    <a\r\n      class=\"w-page-simple-button w-page-simple-prev\"\r\n      :class=\"{\r\n        ['w-page-simple-button-disabled']: prevDisable,\r\n      }\"\r\n      href=\"javascript:;\"\r\n      @click=\"!prevDisable && setNow(current - 1)\"\r\n    >\r\n      <i class=\"w-page-simple-arrow w-page-simple-arrow-prev\"></i>\r\n    </a>\r\n    <w-input\r\n      class=\"w-page-now\"\r\n      size=\"small\"\r\n      v-model=\"current\"\r\n      @keyup.enter.native=\"simpleChange($event)\"\r\n    />\r\n    <i class=\"w-page-italic\">/</i>\r\n    <span class=\"w-page-total\">5</span>\r\n    <a\r\n      class=\"w-page-simple-button w-page-simple-next\"\r\n      :class=\"{\r\n        ['w-page-simple-button-disabled']: nextDisable,\r\n      }\"\r\n      href=\"javascript:;\"\r\n      @click=\"!nextDisable && setNow(current + 1)\"\r\n    >\r\n      <i class=\"w-page-simple-arrow w-page-simple-arrow-next\"></i>\r\n    </a>\r\n  </div>\r\n  <!-- simple end -->\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  Component,\r\n  Model,\r\n  Prop,\r\n  Emit,\r\n  Vue,\r\n  Watch,\r\n} from 'vue-property-decorator';\r\nimport { noop } from '@/helper/noop';\r\nimport WInput from '../input/Input.vue';\r\nimport WButton from '../button/Button.vue';\r\nimport WButtonGroup from '../button/ButtonGroup.vue';\r\n\r\ninterface ShowTotalEntity {\r\n  showTotal: Function;\r\n}\r\n\r\n@Component({\r\n  components: {\r\n    WButton,\r\n    WButtonGroup,\r\n    WInput,\r\n  },\r\n})\r\nexport default class Page extends Vue {\r\n  name: string = 'Page';\r\n\r\n  current: number = 1;\r\n\r\n  @Model('model', { type: Number }) readonly value!: number;\r\n\r\n  @Prop(String) private prevText!: string;\r\n\r\n  @Prop(String) private nextText!: string;\r\n\r\n  @Prop(String) private size!: string;\r\n\r\n  @Prop({\r\n    type: Number,\r\n    default: 50,\r\n  }) private total!: number;\r\n\r\n  @Prop({\r\n    type: Number,\r\n    default: 5,\r\n  }) private midleSize!: number;\r\n\r\n  @Prop({\r\n    type: Number,\r\n    default: 10,\r\n  }) private pageSize!: number;\r\n\r\n  @Prop(Boolean) private simple!: boolean;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: noop,\r\n  }) private change?: Function;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: noop,\r\n  })\r\n  private showTotal!: Function;\r\n\r\n  get isNormalMode(): boolean {\r\n    return !this.simple;\r\n  }\r\n\r\n  get isSmallSize(): boolean {\r\n    return this.isNormalMode && this.size === 'small';\r\n  }\r\n\r\n  get pageNumber(): number {\r\n    return Math.ceil(this.total / this.pageSize);\r\n  }\r\n\r\n  get nextDisable(): boolean {\r\n    return this.current >= this.pageNumber;\r\n  }\r\n\r\n  get prevDisable(): boolean {\r\n    return this.current < 2;\r\n  }\r\n\r\n  get midleSizeValue(): number {\r\n    let length = this.midleSize % 2 === 0 ? this.midleSize + 1 : this.midleSize;\r\n    // 最大 7\r\n    length = Math.min(length, 7);\r\n    // 最大 3\r\n    length = Math.max(length, 3);\r\n    // 并且不能大于总页数\r\n    length = Math.min(length, this.pageNumber);\r\n    return length;\r\n  }\r\n\r\n  get midleNumber(): number[] {\r\n    const midle = [];\r\n    // 四舍五入，当 100 条，每页 20 条\r\n    const step = Math.ceil((this.midleSizeValue - 1) / 2);\r\n    let first = Math.min(\r\n      this.current > step ? this.current - step : 1,\r\n      this.pageNumber - this.midleSizeValue + 1,\r\n    );\r\n    while (midle.length < this.midleSizeValue) {\r\n      midle.push(first++);\r\n    }\r\n    return midle;\r\n  }\r\n\r\n  get itemEnd(): number {\r\n    return this.pageSize * (this.current - 1)\r\n            + (\r\n              Math.ceil(this.total / this.pageSize) === this.current\r\n                ? this.total % this.pageSize : this.pageSize\r\n            );\r\n  }\r\n\r\n  get totalText(): string {\r\n    return (this.showTotal as Function)(\r\n      {\r\n        total: this.total,\r\n        range: [\r\n          1 + this.pageSize * (this.current - 1),\r\n          this.itemEnd,\r\n        ],\r\n      },\r\n    );\r\n  }\r\n\r\n  mounted() {\r\n    this.setNow(this.value, false);\r\n  }\r\n\r\n  setNow(value: number, canEmit: boolean = true) {\r\n    this.current = Math.min(value || 1, this.pageNumber);\r\n    this.current = Math.max(this.current, 1);\r\n\r\n    if (canEmit) {\r\n      (this.change as Function)(this.current);\r\n      this.$emit('change', this.current);\r\n      this.returnModel();\r\n    }\r\n  }\r\n\r\n  @Emit('model')\r\n  returnModel(): number {\r\n    return this.current;\r\n  }\r\n\r\n  nextPage() {\r\n    this.setNow(++this.current);\r\n  }\r\n\r\n  prevPage() {\r\n    this.setNow(--this.current);\r\n  }\r\n\r\n  simpleChange(ev: MouseEvent) {\r\n    this.setNow((ev.target as any).value);\r\n  }\r\n\r\n  // 改变的时候当前页有可能超出总共页数，所以重置\r\n  @Watch('pageSize')\r\n  @Watch('total')\r\n  resetCurrent() {\r\n    this.current = 1;\r\n    this.setNow(this.current, false);\r\n    this.returnModel();\r\n  }\r\n\r\n  // 改变的时候当前页有可能超出总共页数，所以重置\r\n  @Watch('value')\r\n  getValue(val: number) {\r\n    this.setNow(val, false);\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import \"page.scss\";\r\n</style>\r\n"]}]}