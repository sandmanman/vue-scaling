{"remainingRequest":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyufan/em/testPro/vue-scale/src/components/modal/Modal.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/zhangyufan/em/testPro/vue-scale/src/components/modal/Modal.vue","mtime":1573474128000},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/css-loader/index.js","mtime":1573721989187},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1574242648574},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/postcss-loader/src/index.js","mtime":1573721998387},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/sass-loader/lib/loader.js","mtime":1574242652692},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/cache-loader/dist/cjs.js","mtime":1573721989004},{"path":"/Users/zhangyufan/em/testPro/vue-scale/node_modules/vue-loader/lib/index.js","mtime":1574242648574}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"modal.scss\";\n",{"version":3,"sources":["Modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoRA","file":"Modal.vue","sourceRoot":"src/components/modal","sourcesContent":["<template>\r\n  <div v-transfer-dom=\"getContainer && getContainer()\" :data-transfer=\"transfer\">\r\n    <transition name=\"fade\">\r\n      <div\r\n        class=\"w-modal-wrap\"\r\n        :class=\"{\r\n          'w-modal-mask': mask,\r\n        }\"\r\n        v-show=\"status\"\r\n        @click=\"wrapClickFn\"\r\n      >\r\n        <div\r\n          class=\"w-modal\"\r\n          :class=\"{\r\n            'w-modal-center': centerValue,\r\n          }\"\r\n          :style=\"modalStyle\"\r\n          @click.stop=\"noop\"\r\n        >\r\n          <div\r\n            class=\"w-modal-header\"\r\n            :class=\"titleClassName\"\r\n            v-if=\"titleValue || $slots.title\"\r\n          >\r\n            <slot name=\"title\">\r\n              <div class=\"w-modal-title\" v-if=\"titleValue\" v-html=\"titleValue\"></div>\r\n            </slot>\r\n          </div>\r\n          <i class=\"w-modal-close\" v-if=\"closable\" @click=\"cancelFn\"></i>\r\n          <div class=\"w-modal-body\" :class=\"bodyClassName\" :style=\"bodyStyle\">\r\n            <slot></slot>\r\n          </div>\r\n          <div\r\n            class=\"w-modal-footer\"\r\n            :class=\"footerClassName\"\r\n            v-if=\"(okable || cancelable) || $slots.footer\"\r\n          >\r\n            <slot name=\"footer\">\r\n              <w-button\r\n                class=\"w-modal-button w-modal-button-cancel\"\r\n                size=\"large\"\r\n                type=\"border\"\r\n                @click=\"cancelFn\"\r\n                v-if=\"cancelable\"\r\n              >{{cancelText}}</w-button>\r\n              <w-button\r\n                class=\"w-modal-button w-modal-button-ok\"\r\n                size=\"large\"\r\n                :type=\"okType\"\r\n                :loading=\"loadingValue\"\r\n                @click=\"okFn\"\r\n                v-if=\"okable\"\r\n              >{{okText}}</w-button>\r\n            </slot>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  Component,\r\n  Model,\r\n  Prop,\r\n  Emit,\r\n  Vue,\r\n  Watch,\r\n} from 'vue-property-decorator';\r\nimport addDOMEventListener from 'add-dom-event-listener';\r\nimport TransferDom from '@/directives/transfer-dom';\r\nimport WButton from '../button/Button.vue';\r\nimport { noop } from '@/helper/noop';\r\n\r\nVue.directive('transfer-dom', (TransferDom as any));\r\n\r\n@Component({\r\n  components: {\r\n    WButton,\r\n  },\r\n})\r\nexport default class Modal extends Vue {\r\n  name: string = 'Modal';\r\n\r\n  footer: boolean = true;\r\n\r\n  body: boolean = false;\r\n\r\n  status: boolean = false;\r\n\r\n  keyUpEvent: any = null;\r\n\r\n  noop: Function = noop;\r\n\r\n  @Model('model', { type: Boolean }) readonly value!: boolean;\r\n\r\n  @Prop(Boolean) private loading!: boolean;\r\n\r\n  @Prop({\r\n    type: Boolean,\r\n    default: true,\r\n  }) private mask!: boolean;\r\n\r\n  @Prop(Boolean) private maskClosable!: boolean;\r\n\r\n  @Prop({\r\n    type: Boolean,\r\n    default: true,\r\n  }) private closable!: boolean;\r\n\r\n  @Prop(Boolean) private esc!: boolean;\r\n\r\n  @Prop({\r\n    type: Boolean,\r\n    default: true,\r\n  }) private center!: boolean;\r\n\r\n  @Prop({\r\n    type: Boolean,\r\n    default: true,\r\n  }) private cancelable!: boolean;\r\n\r\n  @Prop({\r\n    type: Boolean,\r\n    default: true,\r\n  }) private okable!: boolean;\r\n\r\n  @Prop({\r\n    type: Boolean,\r\n    default: true,\r\n  }) private transfer!: boolean;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: () => document.body,\r\n  }) private getContainer!: Function;\r\n\r\n  @Prop(Function) private before!: Function;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: noop,\r\n  }) private cancel!: Function;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: noop,\r\n  }) private ok!: Function;\r\n\r\n  @Prop({\r\n    type: Function,\r\n    default: noop,\r\n  }) private change!: Function;\r\n\r\n  @Prop(String) private title!: string;\r\n\r\n  @Prop({\r\n    type: String,\r\n    default: '取消',\r\n  }) private cancelText!: string;\r\n\r\n  @Prop({\r\n    type: String,\r\n    default: '确定',\r\n  }) private okText!: string;\r\n\r\n  @Prop(String) private okType!: string;\r\n\r\n  @Prop({\r\n    type: Object,\r\n    default: noop,\r\n  }) private modalStyle!: object;\r\n\r\n  @Prop({\r\n    type: Object,\r\n    default: noop,\r\n  }) private bodyStyle!: object;\r\n\r\n  @Prop([String, Object, Array]) private footerClassName!: string | object | any[];\r\n\r\n  @Prop([String, Object, Array]) private titleClassName!: string | object | any[];\r\n\r\n  @Prop([String, Object, Array]) private bodyClassName!: string | object | any[];\r\n\r\n  get titleValue() {\r\n    return this.title;\r\n  }\r\n\r\n  get centerValue() {\r\n    return this.center;\r\n  }\r\n\r\n  get loadingValue() {\r\n    return this.loading;\r\n  }\r\n\r\n  mounted() {\r\n    this.setStatus(this.value);\r\n    this.bindKeyUp();\r\n  }\r\n\r\n  beforeDestroy() {\r\n    this.unBindKeyUp();\r\n  }\r\n\r\n  setScroll(val: boolean) {\r\n    document.body.style.overflow = val ? 'hidden' : '';\r\n  }\r\n\r\n  @Watch('value')\r\n  @Emit('model')\r\n  setStatus(val: boolean) {\r\n    this.status = val;\r\n    this.setScroll(val);\r\n    return this.status;\r\n  }\r\n\r\n  @Emit('change')\r\n  changeStatus(type: string) {\r\n    this.setStatus(false);\r\n    (this as any)[type](this.status);\r\n    this.change(this.status);\r\n    return this.status;\r\n  }\r\n\r\n  @Emit('cancel')\r\n  cancelFn() {\r\n    if (!this.loadingValue) {\r\n      this.changeStatus('cancel');\r\n    }\r\n    return this.status;\r\n  }\r\n\r\n  @Emit('ok')\r\n  okFn() {\r\n    if (this.before) {\r\n      this.before().then(() => {\r\n        this.$nextTick(() => {\r\n          this.changeStatus('ok');\r\n        });\r\n      });\r\n    } else {\r\n      this.changeStatus('ok');\r\n    }\r\n    return this.status;\r\n  }\r\n\r\n  bindKeyUp() {\r\n    // ESC close\r\n    this.keyUpEvent = addDOMEventListener(document, 'keydown', this.keyUpFn);\r\n  }\r\n\r\n  unBindKeyUp() {\r\n    // ESC close\r\n    this.keyUpEvent.remove();\r\n    this.keyUpEvent = null;\r\n  }\r\n\r\n  @Emit('cancel')\r\n  keyUpFn(ev = window.event) {\r\n    if (this.status && this.esc && (ev as any).keyCode === 27 && !this.loadingValue) {\r\n      this.changeStatus('cancel');\r\n    }\r\n    return this.status;\r\n  }\r\n\r\n  wrapClickFn() {\r\n    if (this.maskClosable) {\r\n      this.cancelFn();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import \"modal.scss\";\r\n</style>\r\n"]}]}